{"version":3,"sources":["component/Profile/ProfileFollowers/ProfileFollowers.js"],"names":["ProfileGallery","currentUser","useAuth","useState","userProfile","setUserProfile","foundCurrentUser","setCurrentUser","followingData","setFollowingData","followers","setFollowers","grabFollowingData","a","Object","keys","length","profileObj","profile","results","values","followingId","following","data","i","instance","get","id","then","res","push","userId","userObjectId","profileObjectValue","catch","err","console","log","grabUserProfile","uid","useEffect","window","scrollTo","displayUsers","followingUsers","map","doc","profileValues","profilePic","src","img1","images","imgValue","imageUrl","className","name"],"mappings":"mQAUe,SAASA,IAAkB,IAC9BC,EAAgBC,cAAhBD,YAD6B,EAECE,mBAAS,IAFV,mBAE9BC,EAF8B,KAEjBC,EAFiB,OAGLF,mBAAS,IAHJ,gCAIMA,mBAAS,KAJf,mBAI9BG,EAJ8B,KAIZC,EAJY,OAKCJ,mBAAS,MALV,gCAMKA,mBAAS,KANd,mBAM9BK,EAN8B,KAMfC,EANe,OAOHN,oBAAS,GAPN,mBAO9BO,EAP8B,KAOnBC,EAPmB,KAS/BC,EAAiB,uCAAG,sBAAAC,EAAA,0DAClBT,EADkB,qBAELU,OAAOC,KAAKX,GAGdY,OAAS,GALF,yCAAAH,EAAA,8CAAAA,EAAA,sDAORI,EAAaH,OAAOC,KAAKX,EAAY,GAAGc,SACxCC,EAAUL,OAAOM,OAAOhB,EAAY,GAAGc,SAEvCG,EAAcP,OAAOC,KAAKI,EAAQ,GAAGT,WACrCY,EAAYR,OAAOM,OAAOD,EAAQ,GAAGT,WAGvCa,EAAO,GAdG,IAAAV,EAAA,iBAeLW,GAfK,SAAAX,EAAA,sEAgBJY,IAASC,IAAT,iBAAuBJ,EAAUE,GAAGG,GAApC,UACDC,MAAK,SAAAC,GAEFN,EAAKO,KAAL,2BAAeD,EAAIN,MAAnB,IAAyBQ,OAAQT,EAAUE,GAAGG,GAAIK,aAAcX,EAAYG,GAAIS,mBAAoBhB,EAAW,SAGlHiB,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,MAtBpB,0CAeLX,EAAI,EAfC,YAeEA,EAAIF,EAAUN,QAfhB,0CAeLQ,GAfK,eAewBA,IAfxB,uBAwBVD,EAAKP,OAAS,GACdP,EAAiBc,GAzBP,gGAAH,qDA+BjBe,EAAe,uCAAG,sBAAAzB,EAAA,sEACdY,IAASC,IAAT,iBAAuBzB,EAAYsC,IAAnC,UACDX,MAAK,SAAAC,GAEF,IAAMV,EAAU,GAChBA,EAAQW,KAAR,eACOD,EAAIN,OAEXlB,EAAec,GACfZ,EAAe,aACfI,GAAa,MAEhBuB,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,MAZV,2CAAH,qDAmCrBK,oBAAS,sBAAC,sBAAA3B,EAAA,sDACN4B,OAAOC,SAAS,EAAG,GAEnBJ,IACIlC,GACAQ,IALE,2CAOP,CAACN,EAAkBI,IAKtB,IAAIiC,EAAe,wBACfC,EAAiB,wBAiErB,OA7DIpC,GAEIA,EAAcQ,OAAS,IACvB2B,EAAenC,EAAcqC,KAAI,SAAAC,GAIVhC,OAAOC,KAAK+B,EAAI5B,SAAnC,IAEM6B,EAAgBjC,OAAOM,OAAO0B,EAAI5B,SAIpC8B,EAAa,qBAAKC,IAAKC,MAC3B,GAAIH,EAAc,GAAGI,OAAQ,CACzB,IAAMC,EAAWtC,OAAOM,OAAO2B,EAAc,GAAGI,QAChDH,EAAa,qBAAKC,IAAKG,EAAS,GAAGC,WAEnCT,EAEI,sBAAKU,UAAU,YAAf,UACI,qBAAKA,UAAU,aAAf,SACKN,IAEL,qBAAKM,UAAU,cAAf,SACI,6BAAKP,EAAc,GAAGQ,WALET,EAAId,cA+B5C,OAhBKe,EAAc,GAAGI,SAElBP,EAEI,sBAAKU,UAAU,YAAf,UACI,qBAAKA,UAAU,aAAf,SACKN,IAEL,qBAAKM,UAAU,cAAf,SACI,6BAAKP,EAAc,GAAGQ,WALET,EAAId,eAaxC,qBAAKsB,UAAU,iBAAf,SACKV,QASjB,sBAAKU,UAAU,OAAf,UAEI,sBAAKA,UAAU,UAAf,UACI,cAAC,IAAD,IACA,sBAAKA,UAAU,YAAf,UACI,2CACCX,QAGT,cAAC,IAAD","file":"static/js/5.51ab6bf6.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport instance from '../../../axios-orders';\r\nimport { useAuth } from '../../Authentication/AuthContext/AuthContext';\r\nimport Modal from '../../Blogging/ImageGrid/Modal/Modal';\r\nimport Profile from '../Profile';\r\nimport { motion } from 'framer-motion';\r\nimport Footer from '../../Navigation/Footer/Footer';\r\nimport { Link } from 'react-router-dom';\r\nimport img1 from '../../../assets/images/default-profile-picture1.jpg';\r\n\r\nexport default function ProfileGallery() {\r\n    const { currentUser } = useAuth();\r\n    const [userProfile, setUserProfile] = useState([]);\r\n    const [blogData, setBlogData] = useState([]);\r\n    const [foundCurrentUser, setCurrentUser] = useState('');\r\n    const [selectedImg, setSelectedImg] = useState(null);\r\n    const [followingData, setFollowingData] = useState([]);\r\n    const [followers, setFollowers] = useState(false)\r\n\r\n    const grabFollowingData = async () => {\r\n        if (userProfile) {\r\n            let object = Object.keys(userProfile);\r\n            // console.log(object)\r\n            // console.log(object.length)\r\n            if (object.length > 0) {\r\n                // console.log(userProfile[0].userProfile);\r\n                const profileObj = Object.keys(userProfile[0].profile);\r\n                const results = Object.values(userProfile[0].profile);\r\n                // console.log(results);\r\n                const followingId = Object.keys(results[0].followers);\r\n                const following = Object.values(results[0].followers);\r\n                // console.log(following);\r\n                // console.log(following.length);\r\n                let data = [];\r\n                for (let i = 0; i < following.length; i++) {\r\n                    await instance.get(`/users/${following[i].id}.json`)\r\n                        .then(res => {\r\n                            // console.log(res);\r\n                            data.push({ ...res.data, userId: following[i].id, userObjectId: followingId[i], profileObjectValue: profileObj[0] })\r\n                            // console.log(data);\r\n                        })\r\n                        .catch(err => console.log(err));\r\n                }\r\n                if (data.length > 0) {\r\n                    setFollowingData(data);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    const grabUserProfile = async () => {\r\n        await instance.get(`/users/${currentUser.uid}.json`)\r\n            .then(res => {\r\n                // console.log(res);\r\n                const results = [];\r\n                results.push({\r\n                    ...res.data\r\n                })\r\n                setUserProfile(results);\r\n                setCurrentUser('logged in');\r\n                setFollowers(false);\r\n            })\r\n            .catch(err => console.log(err));\r\n    }\r\n\r\n    const unfollowUser = async (currentUser, followingUser, followingUserObjectId, currentUserProfileObjectValue) => {\r\n        // console.log(currentUser);\r\n        // console.log(followingUser);\r\n        // console.log(followingUserObjectId);\r\n        await instance.delete(`https://auth-production-90d68-default-rtdb.firebaseio.com/users/${currentUser}/profile/${currentUserProfileObjectValue}/following/${followingUserObjectId}.json`)\r\n            .then(response => {\r\n                // console.log(response);\r\n                setFollowers(true);\r\n            })\r\n            .catch(err => console.log(err));\r\n\r\n        // console.log(userProfile[0].profile);\r\n        const followingStats = Object.values(userProfile[0].profile);\r\n        const followingValues = Object.values(followingStats[0].following);\r\n        // console.log(followingValues);\r\n        // console.log(followingValues.length);\r\n\r\n\r\n    }\r\n\r\n    useEffect(async () => {\r\n        window.scrollTo(0, 0)\r\n\r\n        grabUserProfile();\r\n        if (userProfile) {\r\n            grabFollowingData()\r\n        }\r\n    }, [foundCurrentUser, followers])\r\n\r\n    // console.log(followingData);\r\n    // console.log(userProfile);\r\n\r\n    let displayUsers = <div></div>\r\n    let followingUsers = <div></div>\r\n\r\n\r\n\r\n    if (followingData) {\r\n\r\n        if (followingData.length > 0) {\r\n            displayUsers = followingData.map(doc => {\r\n                // console.log(currentUser.uid)\r\n                // console.log(doc);\r\n                // console.log(doc.id);\r\n                const profileObj = Object.keys(doc.profile);\r\n                // console.log(profileObj[0])\r\n                const profileValues = Object.values(doc.profile);\r\n                // console.log(profileValues[0]);\r\n                // console.log(profileValues[0].following);\r\n\r\n                let profilePic = <img src={img1} />\r\n                if (profileValues[0].images) {\r\n                    const imgValue = Object.values(profileValues[0].images);\r\n                    profilePic = <img src={imgValue[0].imageUrl} />\r\n                    // console.log(doc);\r\n                    followingUsers = (\r\n                        // <div className='followingUsers' key={doc.id}>\r\n                        <div className='following' key={doc.userObjectId}>\r\n                            <div className='profilePic'>\r\n                                {profilePic}\r\n                            </div>\r\n                            <div className='profileName'>\r\n                                <h2>{profileValues[0].name}</h2>\r\n                                {/* <h2>{blog.profileName}</h2>\r\n                                <p>{blogContent[0].date}</p> */}\r\n                            </div>\r\n                            {/* <button onClick={() => unfollowUserntUser.uid, doc.userId, doc.userObjectId, doc.userObjectId)}>Unfollow</button> */}\r\n                        </div>\r\n\r\n                        // </div>\r\n                    )\r\n                }\r\n                if (!profileValues[0].images) {\r\n                    // console.log(doc);\r\n                    followingUsers = (\r\n                        // <div className='followingUsers' key={doc.}>\r\n                        <div className='following' key={doc.userObjectId}>\r\n                            <div className='profilePic'>\r\n                                {profilePic}\r\n                            </div>\r\n                            <div className='profileName'>\r\n                                <h2>{profileValues[0].name}</h2>\r\n                            </div>\r\n                            {/* <button onClick={() => unfollowUser(currentUser.uid, doc.userId, doc.userObjectId, doc.profileObjectValue)}>Unfollow</button> */}\r\n                        </div>\r\n                        // </div>\r\n                    )\r\n                }\r\n                return (\r\n                    <div className='followingUsers'>\r\n                        {followingUsers}\r\n                    </div>\r\n                )\r\n\r\n            })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className='home'>\r\n\r\n            <div className='profile'>\r\n                <Profile />\r\n                <div className='followers'>\r\n                    <h1>Followers</h1>\r\n                    {displayUsers}\r\n                </div>\r\n            </div>\r\n            <Footer />\r\n        </div>\r\n\r\n    )\r\n}"],"sourceRoot":""}