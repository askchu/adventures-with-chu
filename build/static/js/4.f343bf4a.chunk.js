(this["webpackJsonpblog-app"]=this["webpackJsonpblog-app"]||[]).push([[4],{531:function(e,t,c){"use strict";c.r(t),c.d(t,"default",(function(){return g}));var n=c(52),a=c(5),s=c.n(a),o=(c(9),c(11)),r=c(4),l=c(2),i=(c(184),c(10)),u=c(14),j=c(112),d=c(74),b=c(6),O=c(175),h=c(117),f=c(176),p=c(1);function g(){var e=Object(l.useRef)(),t=Object(l.useRef)(),c=Object(l.useRef)(),a=Object(i.b)(),g=a.currentUser,v=(a.updateProfile,Object(l.useState)("")),m=Object(r.a)(v,2),x=m[0],S=m[1],N=Object(l.useState)(null),k=Object(r.a)(N,2),w=k[0],y=k[1],C=Object(d.a)(g.uid).docs,D=Object(u.g)(),I=Object(l.useState)([]),B=Object(r.a)(I,2),J=B[0],q=(B[1],Object(l.useState)("")),F=Object(r.a)(q,2),M=F[0],P=F[1],R=Object(l.useState)(null),Y=Object(r.a)(R,2),A=Y[0],E=Y[1],T=Object(l.useState)(null),U=Object(r.a)(T,2),L=U[0],z=U[1],G=Object(l.useState)(null),H=Object(r.a)(G,2),K=H[0],Q=H[1],V=Object(l.useState)(null),W=Object(r.a)(V,2),X=W[0],Z=W[1],$=Object(l.useState)(null),_=Object(r.a)($,2),ee=_[0],te=_[1],ce=Object(l.useState)(!1),ne=Object(r.a)(ce,2),ae=ne[0],se=ne[1],oe=Object(u.h)().id,re=Object(l.useState)([]),le=Object(r.a)(re,2),ie=le[0],ue=le[1],je=Object(O.a)(C,oe,X,ee).datas,de=new Date,be=["January","February","March","April","May","June","July","August","September","October","November","December"][de.getMonth()],Oe=String(de.getDate()).padStart(2,"0"),he=de.getFullYear(),fe="".concat(be," ").concat(Oe,"/").concat(he),pe=function(){b.a.request({method:"delete",url:"users/".concat(g.uid,"/drafts/").concat(oe,".json")}).then((function(e){})).catch((function(e){return console.log(e)})),b.a.request({method:"delete",url:"users/".concat(g.uid,"/count/").concat(J.id,".json")}).then((function(e){})).catch((function(e){return console.log(e)})),D.push("/profile-blogs")},ge=function(e){e.target.classList.contains("backdrop")&&se(!1)},ve=[];!0===ae&&(ve=Object(p.jsx)("div",{className:"container",children:Object(p.jsx)("div",{className:"backdrop",onClick:ge,children:Object(p.jsxs)("div",{className:"options",children:[Object(p.jsx)("h2",{children:"Save to Drafts?"}),Object(p.jsxs)("div",{className:"actions",children:[Object(p.jsx)("button",{onClick:function(){var e="";(ye||t.current.value!==e)&&(ye!==t.current.value&&(e=t.current.value),ye===t.current.value&&(e=ye));var n=Be;c.current.value!==n&&(n=c.current.value),je.length>0&&Ae&&Ae.push(J.id),je.length>0&&!Ae&&J.id,je.length;var a="",s="";ie.length>0&&(a=ie[0].content,s=Object.keys(a),Ce(a[s].title),Je(a[s].content));var o={title:e,content:n};b.a.put("users/".concat(g.uid,"/drafts/").concat(oe,"/content/").concat(s,".json"),o).then((function(e){})).catch((function(e){return console.log(e)})),b.a.request({method:"delete",url:"users/".concat(g.uid,"/count/").concat(J.id,".json")}).then((function(e){})).catch((function(e){return console.log(e)})),D.push("/profile-blogs")},children:"Yes"}),Object(p.jsx)("button",{onClick:pe,children:"No"})]})]})})}));var me=Object(l.useState)(!1),xe=Object(r.a)(me,2),Se=xe[0],Ne=xe[1];!0===Se&&(ve=Object(p.jsx)("div",{className:"container",children:Object(p.jsx)("div",{className:"backdrop",onClick:ge,children:Object(p.jsxs)("div",{className:"options",children:[Object(p.jsx)("h2",{children:"Delete Draft?"}),Object(p.jsxs)("div",{className:"actions",children:[Object(p.jsx)("button",{onClick:pe,children:"Yes"}),Object(p.jsx)("button",{onClick:function(){Ne(!1)},children:"No"})]})]})})}));var ke=Object(l.useState)(""),we=Object(r.a)(ke,2),ye=we[0],Ce=we[1],De=Object(l.useState)(""),Ie=Object(r.a)(De,2),Be=Ie[0],Je=Ie[1],qe=Object(l.useState)([]),Fe=Object(r.a)(qe,2),Me=Fe[0],Pe=Fe[1],Re=Object(l.useState)([]),Ye=Object(r.a)(Re,2),Ae=Ye[0],Ee=(Ye[1],function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("users/".concat(g.uid,"/drafts/").concat(oe,".json")).then((function(e){var t=[];t.push({content:e.data.content,images:e.data.images}),ue(t),Pe(e.data.images);var c="",n="";t.length>0&&(c=t[0].content,n=Object.keys(c),Ce(c[n].title),Je(c[n].content))})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());Object(l.useEffect)(function(){var e=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.scrollTo(0,0),Ee();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[ee]);return Object(p.jsxs)("div",{className:"container-add",children:[Object(p.jsxs)("div",{className:"title",children:[Object(p.jsxs)("h1",{children:["Edit Draft #",oe]}),Object(p.jsxs)("div",{className:"choices",children:[Object(p.jsx)("button",{onClick:function(){se(!0)},children:"Back"}),Object(p.jsx)("button",{className:"delete",onClick:function(){Ne(!0)},children:"Delete"})]})]}),Object(p.jsxs)("form",{className:"newBlog",children:[Object(p.jsxs)("div",{className:"newBlog-input",children:[Object(p.jsx)("label",{children:"Title "}),Object(p.jsx)("input",{type:"text",ref:t,value:ye,onChange:function(e){return Ce(e.target.value)}})]}),Object(p.jsxs)("div",{className:"newBlog-input",children:[Object(p.jsx)("label",{children:"Images "}),Object(p.jsxs)("div",{className:"inputFile",children:[Object(p.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];J.length>1&&J.length,t&&["image/png","image/jpeg"].includes(t.type)?(y(t),P(oe),S("")):(y(null),P(""),S("Please select an image file (png or jpeg)"))},ref:e}),Object(p.jsx)("span",{children:Object(p.jsx)("i",{className:"fas fa-plus"})})]}),Object(p.jsx)("h4",{children:"Click on any image to edit and add a description"}),Object(p.jsxs)("div",{className:"output",children:[x&&Object(p.jsx)("div",{className:"errors",children:x}),w&&w.name,w&&Object(p.jsx)(j.a,{file:w,setFile:y,id:M,setId:P})]})]}),Object(p.jsx)(h.a,{data:je,setSelectedImg:E,setSelectedId:z,setSelectedDescription:Q,imageDraft:Me}),A&&Object(p.jsx)(f.a,{selectedImg:A,setSelectedImg:E,selectedId:L,setSelectedId:z,selectedDescription:K,setSelectedDescription:Q,count:oe,savedDescription:Z,deletedImage:te,deletedImageUrl:""}),Object(p.jsxs)("div",{className:"newBlog-input",children:[Object(p.jsx)("label",{children:"Content "}),Object(p.jsx)("textarea",{rows:"20",cols:"100",value:Be,ref:c,onChange:function(e){return Je(e.target.value)}})]}),Object(p.jsx)("div",{className:"newBlog-post",children:Object(p.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault();var a={date:fe,title:t.current.value,content:c.current.value};b.a.post("users/".concat(g.uid,"/blogs/").concat(oe,"/content.json"),a).then((function(e){})).catch((function(e){return console.log(e)}));var s,o=Object(n.a)(je);try{for(o.s();!(s=o.n()).done;){var r=s.value;b.a.post("users/".concat(g.uid,"/blogs/").concat(oe,"/images.json"),r).then((function(e){})).catch((function(e){return console.log(e)}))}}catch(l){o.e(l)}finally{o.f()}b.a.request({method:"delete",url:"users/".concat(g.uid,"/drafts/").concat(oe,".json")}).then((function(e){})).catch((function(e){return console.log(e)})),D.push("/profile-blogs")},children:"Post"})})]}),ve]})}}}]);
//# sourceMappingURL=4.f343bf4a.chunk.js.map