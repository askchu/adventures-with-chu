(this["webpackJsonpblog-app"]=this["webpackJsonpblog-app"]||[]).push([[0],{115:function(e,t,c){},162:function(e,t,c){},163:function(e,t,c){},171:function(e,t,c){},172:function(e,t,c){},190:function(e,t,c){},192:function(e,t,c){},193:function(e,t,c){},194:function(e,t,c){},195:function(e,t,c){},196:function(e,t,c){},203:function(e,t,c){},204:function(e,t,c){},499:function(e,t,c){},500:function(e,t,c){},501:function(e,t,c){},502:function(e,t,c){},503:function(e,t,c){},504:function(e,t,c){},505:function(e,t,c){},506:function(e,t,c){"use strict";c.r(t);var n=c(2),s=c.n(n),a=c(38),o=c.n(a),r=(c(171),c(34)),l=c(35),i=c(37),u=c(36),j=function(e){return e.children},d=c(7),b=(c(172),c(52)),O=c.n(b),f=O.a.create({baseURL:"https://auth-production-90d68-default-rtdb.firebaseio.com/"}),h=(c(190),c(0));function g(e){var t=Object(h.jsx)("p",{className:"content",children:e.content});return e.content.length>90&&(t=Object(h.jsxs)("p",{className:"content",children:[e.content.slice(0,89),"... ",Object(h.jsx)("span",{children:"Read more"})]})),Object(h.jsx)("div",{className:"cardContainer",children:Object(h.jsx)("a",{href:"my-blogs/".concat(e.id,"/"),children:Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("h2",{children:e.title}),Object(h.jsxs)("h4",{children:["Written by: ",e.author]}),Object(h.jsxs)("p",{className:"date",children:["Posted on: ",e.date]}),t]})})})}var p=function(e){Object(i.a)(c,e);var t=Object(u.a)(c);function c(e){var n;return Object(r.a)(this,c),(n=t.call(this)).newPostHandler=function(){var e={author:n.state.author,date:n.state.date,content:n.state.content};f.post("/posts.json",e).then((function(e){return console.log(e),n.getData(),n.setState({author:"",date:"",content:""})})).catch((function(e){return console.log(e)}))},n.getData=function(){f.get("/posts.json").then((function(e){console.log(e.data);var t=[];for(var c in e.data)t.unshift(Object(d.a)(Object(d.a)({},e.data[c]),{},{id:c}));n.setState({posts:t})}))},n.state={posts:[],submitted:!1},console.log("constructor"),n}return Object(l.a)(c,[{key:"componentDidMount",value:function(){this.getData(),console.log("component did mount")}},{key:"render",value:function(){var e=this.state.posts.map((function(e){return Object(h.jsx)(g,{title:e.title,author:e.author,date:e.date,content:e.content,id:e.id},e.id)}));return Object(h.jsx)(j,{children:Object(h.jsxs)("div",{className:"blog",children:[Object(h.jsxs)("div",{className:"profile",children:[Object(h.jsx)("h5",{children:"Profile"}),Object(h.jsxs)("div",{className:"pic",children:[Object(h.jsx)("img",{}),"I am img"]}),Object(h.jsx)("p",{children:"User: Alex Chu"}),Object(h.jsx)("button",{children:"Account"}),Object(h.jsx)("button",{children:"Following"}),Object(h.jsx)("button",{children:"Settings"})]}),Object(h.jsxs)("div",{className:"posts",children:[Object(h.jsx)("h5",{children:"My Blogs"}),Object(h.jsx)("div",{className:"icon",children:Object(h.jsxs)("a",{href:"/profile/my-blogs/new",children:["New Blog",Object(h.jsx)("i",{className:"fas fa-plus"})]})}),Object(h.jsx)("div",{className:"blogs",children:e})]})]})})}}]),c}(n.Component),m=function(e){Object(i.a)(c,e);var t=Object(u.a)(c);function c(){return Object(r.a)(this,c),t.apply(this,arguments)}return Object(l.a)(c,[{key:"render",value:function(){return Object(h.jsx)(j,{children:Object(h.jsx)(p,{})})}}]),c}(n.Component),x=(c(192),function(e){Object(i.a)(c,e);var t=Object(u.a)(c);function c(){return Object(r.a)(this,c),t.apply(this,arguments)}return Object(l.a)(c,[{key:"render",value:function(){return Object(h.jsx)("div",{children:Object(h.jsx)("section",{children:Object(h.jsx)(m,{})})})}}]),c}(n.Component)),v=c(5),N=c.n(v),w=c(6),k=c(4);c(193),c(194);function S(e){var t=Object(h.jsx)("p",{children:e.description});e.description.length>120&&(t=Object(h.jsxs)("p",{children:[e.description.slice(0,119),"...",Object(h.jsx)("span",{children:Object(h.jsx)("a",{href:e.url,target:"__blank",children:" Read More."})})]}));var c=Object(h.jsxs)("h5",{children:["By: ",e.author]});null==e.author&&(c=Object(h.jsx)("h5",{children:"By: Unknown"}));var n="";return e.img&&(n=Object(h.jsxs)(j,{children:[Object(h.jsx)("div",{className:"newsPic",style:{background:"url(".concat(e.img,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover"}}),Object(h.jsxs)("div",{className:"summary",children:[c,Object(h.jsx)("h4",{children:e.title}),t]})]})),null==e.img&&(n=Object(h.jsxs)("div",{className:"summary",children:[Object(h.jsx)("h4",{children:e.title}),c,t]})),Object(h.jsx)("div",{className:"news",children:n})}c(195);var y=function(e){Object(i.a)(c,e);var t=Object(u.a)(c);function c(e){var n;return Object(r.a)(this,c),(n=t.call(this)).state={news:[]},console.log("constructor"),n}return Object(l.a)(c,[{key:"componentDidMount",value:function(){var e=this;O.a.get("http://newsapi.org/v2/everything?qInTitle=vacation&sortBy=popularity&apiKey=1b2cf9f17cb94f8fbb7fd0f5fd2ff074").then((function(t){for(var c=[],n=0;n<3;n++)c.push({id:n,author:t.data.articles[n].author,title:t.data.articles[n].title,description:t.data.articles[n].description,url:t.data.articles[n].url,urlImg:t.data.articles[n].urlToImage});e.setState({news:c}),console.log(e.state.news)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state.news.map((function(e){return Object(h.jsx)(S,{title:e.title,author:e.author,description:e.description,url:e.url,img:e.urlImg},e.id)}));return Object(h.jsx)("div",{className:"worldNews",children:e})}}]),c}(n.Component);c(196);function C(){return Object(h.jsx)("footer",{children:Object(h.jsx)("div",{className:"footer",children:Object(h.jsxs)("h4",{children:["\xa9 ",(new Date).getFullYear()," Copyright: Adventures With Chu"]})})})}var P=c(12),D=c(9),E=c(53),A=(c(197),c(507),c(508),Object({NODE_ENV:"production",PUBLIC_URL:"/adventures-with-chu",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTH_DOMAIN:"auth-production-90d68.firebaseapp.com",REACT_APP_DEV_MODE:"This is a development mode",REACT_APP_FIREBASE_API_KEY:"AIzaSyBA0tULZMZ3wL0-mVXxOLpfb4zGa3G5acM",REACT_APP_GNEWS:"bd6b156dd22b9e68637a63384d91680e",REACT_APP_ID:"1:83876496888:web:7471c0781bc281ee7c020d",REACT_APP_MESSAGING_SENDER_ID:"83876496888",REACT_APP_PROJECT_ID:"auth-production-90d68",REACT_APP_STORAGE_BUCKET:"auth-production-90d68.appspot.com"})),I={apiKey:A.REACT_APP_FIREBASE_API_KEY,authDomain:A.REACT_APP_AUTH_DOMAIN,projectId:A.REACT_APP_PROJECT_ID,storageBucket:A.REACT_APP_STORAGE_BUCKET,messagingSenderId:A.REACT_APP_MESSAGING_SENDER_ID,appId:A.REACT_APP_ID};E.a.initializeApp(I);var U=E.a.storage(),R=E.a.firestore(),_=E.a.firestore.FieldValue.serverTimestamp,B=E.a.auth(),T=s.a.createContext();function F(){return Object(n.useContext)(T)}function M(e){var t=e.children,c=Object(n.useState)(),s=Object(k.a)(c,2),a=s[0],o=s[1],r=Object(n.useState)(!0),l=Object(k.a)(r,2),i=l[0],u=l[1];Object(n.useEffect)((function(){return B.onAuthStateChanged((function(e){o(e),u(!1)}))}),[]);var j={currentUser:a,register:function(e,t){return B.createUserWithEmailAndPassword(e,t)},login:function(e,t){return B.signInWithEmailAndPassword(e,t)},logout:function(){return B.signOut()},resetPassword:function(e){return B.sendPasswordResetEmail(e)},updateProfile:function(e,t){return a.updateProfile({email:e,password:t}).then(console.log("update successful")).catch((function(e){console.log(e)}))}};return Object(h.jsx)(T.Provider,{value:j,children:!i&&t})}var L=function(e,t){var c=Object(n.useState)(0),s=Object(k.a)(c,2),a=s[0],o=s[1],r=Object(n.useState)(null),l=Object(k.a)(r,2),i=l[0],u=l[1],j=Object(n.useState)(null),d=Object(k.a)(j,2),b=d[0],O=d[1],h=F().currentUser,g=h.uid;return Object(n.useEffect)((function(){console.log(t+" from useStorage.js");var c=U.ref(e.name),n=R.collection(g),s=new Date,a=["January","February","March","April","May","June","July","August","September","October","November","December"][s.getMonth()],r=String(s.getDate()).padStart(2,"0");s.getFullYear();c.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;o(t)}),(function(e){u(e)}),Object(w.a)(N.a.mark((function e(){var s,a,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.getDownloadURL();case 2:return s=e.sent,a=_(),n.add({url:s,createdAt:a}),O(s),o={imageUrl:s,description:""},e.next=9,f.post("users/".concat(h.uid,"/drafts/").concat(t,"/images.json"),o).then((function(e){console.log(e),console.log("img uploaded to firebase DB")})).catch((function(e){return console.log(e)}));case 9:case"end":return e.stop()}}),e)}))))}),[e]),{progress:a,url:b,error:i}};c(115);function q(e){var t=e.file,c=e.setFile,s=e.id,a=e.setId,o=L(t,s),r=o.url,l=o.progress;return console.log(s+" from progressBar.js"),console.log(l,r),Object(n.useEffect)((function(){r&&c(null)}),[r,c,a]),Object(h.jsx)("div",{className:"progress-bar",style:{width:l+"%"}})}var J=c.p+"static/media/img1.03faf828.jpg";var Y=function(){var e=F().currentUser,t=Object(n.useState)([]),c=Object(k.a)(t,2),s=c[0],a=c[1],o=Object(n.useState)(""),r=Object(k.a)(o,2),l=r[0],i=r[1],u=Object(n.useState)([]),j=Object(k.a)(u,2),b=j[0],O=j[1],g=(Object(P.g)().history,function(){var t=Object(w.a)(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.get("/users/".concat(e.uid,".json")).then((function(e){var t=[];t.push(Object(d.a)({},e.data)),a(t),i("logged in")})).catch((function(e){return console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()),p=function(){var e=Object(w.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=4;break}if(!(Object.keys(s).length>0)){e.next=4;break}return e.delegateYield(N.a.mark((function e(){var t,c,n,a,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.values(s[0].profile),c=Object.values(t[0].following),n=[],a=N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("/users/".concat(c[t].id,".json")).then((function(e){console.log(e),n.push(Object(d.a)(Object(d.a)({},e.data),{},{id:c[t].id}))})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})),o=0;case 5:if(!(o<c.length)){e.next=10;break}return e.delegateYield(a(o),"t0",7);case 7:o++,e.next=5;break;case 10:n.length>0&&O(n);case 11:case"end":return e.stop()}}),e)}))(),"t0",4);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(t){window.scrollTo(0,0),e||console.log("not logged in"),e&&g(),s&&p()}),[l]);var m=Object(h.jsx)("div",{}),x=Object(h.jsx)("div",{});console.log(b);var v=[],S=[];b&&b.length>0&&(b.map((function(e){for(var t=Object.keys(e.blogs),c=[],n=0;n<t.length;n++)c.push({id:t[n],content:e.blogs[t[n]].content,images:e.blogs[t[n]].images});var s=e.id,a=Object.values(e.profile);v.push({blogs:c,profileName:a[0].name,profilePic:a[0].images,id:s})})),v.map((function(e){e.blogs.forEach((function(t){S.unshift({content:t.content,images:t.images,blogId:t.id,userId:e.id,profileName:e.profileName,profilePic:e.profilePic})}))})),m=S.map((function(e){e.profileName;var t=Object.keys(e.content),c="".concat(e.userId,"/blogs/").concat(e.blogId),n=Object.values(e.content),s=Object(h.jsx)("div",{});if(e.images){var a=Object.values(e.images);s=Object(h.jsx)("div",{className:"image",children:Object(h.jsx)("img",{src:a[0].imageUrl})})}var o=Object(h.jsx)("img",{src:J});if(e.profilePic){var r=Object.values(e.profilePic);o=Object(h.jsx)("img",{src:r[0].imageUrl})}return Object(h.jsxs)("div",{className:"blogs",children:[Object(h.jsxs)("div",{className:"following",children:[Object(h.jsx)("div",{className:"profilePic",children:o}),Object(h.jsxs)("div",{className:"profileContent",children:[Object(h.jsx)("h2",{children:e.profileName}),Object(h.jsx)("p",{children:n[0].date})]})]}),Object(h.jsx)("h4",{children:n[0].title}),s,Object(h.jsx)(D.b,{to:c,children:Object(h.jsx)("button",{children:"Read Blog"})})]},t[0])})));var E=Object(h.jsx)("div",{});return e&&(x=Object(h.jsxs)("div",{className:"featured",children:[Object(h.jsx)("h3",{className:"featuredH3",children:"Recent Posts"}),Object(h.jsx)("div",{className:"featuredBlogs",children:m})]})),e||(E=Object(h.jsx)("div",{className:"logo",children:Object(h.jsxs)("div",{className:"brief",children:[Object(h.jsx)("h1",{children:"Welcome to Adventures with Chu"}),Object(h.jsx)("h3",{children:"Start blogging and share with everyone."})]})})),Object(h.jsxs)("div",{className:"home",children:[E,Object(h.jsxs)("main",{className:"containers welcome",children:[Object(h.jsxs)("div",{className:"intro",children:[x,Object(h.jsx)("div",{className:"underline",children:Object(h.jsx)("div",{className:"shadow"})})]}),Object(h.jsx)("div",{className:"logo2",children:Object(h.jsxs)("div",{className:"brief2",children:[Object(h.jsx)("h1",{children:"Come check other blogs!"}),Object(h.jsx)("button",{children:Object(h.jsx)(D.b,{to:"/browse",children:"Browse"})})]})}),Object(h.jsx)("div",{className:"underline",children:Object(h.jsx)("div",{className:"shadow"})}),Object(h.jsxs)("div",{className:"new",children:[Object(h.jsx)("h3",{children:"What's Happening Around the World"}),Object(h.jsx)(y,{})]})]}),Object(h.jsx)(C,{})]})};c(203),c(204);var G=c.p+"static/media/logo1.24b6b22e.png",W=c.p+"static/media/logo3.7c17e91f.png";c(205);var H=function(){var e=Object(n.useState)(!1),t=Object(k.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(!1),o=Object(k.a)(a,2),r=(o[0],o[1]),l=Object(n.useState)(""),i=Object(k.a)(l,2),u=(i[0],i[1]),d=F(),b=d.currentUser,O=d.logout,f=function(){return s(!1)},g=Object(P.g)().history,p=function(){var e=Object(w.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(""),e.next=4,O();case 4:window.location.reload(),g.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),u("Failed to log out");case 11:f();case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),m=Object(h.jsxs)("ul",{className:c?"nav-menu active":"nav-menu",children:[Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(D.b,{to:"/",className:"nav-links",onClick:f,children:"Home"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(D.b,{to:"/browse",className:"nav-links",onClick:f,children:"Browse"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(D.b,{to:"/sign-in",className:"nav-links",onClick:f,children:"Sign In"})})]});return b&&(m=Object(h.jsxs)("ul",{className:c?"nav-menu active":"nav-menu",children:[Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(D.b,{to:"/",className:"nav-links",onClick:f,children:"Home"})}),Object(h.jsx)("li",{className:"nav-item",onMouseEnter:function(){window.innerWidth<960?r(!1):r(!0)},onMouseLeave:function(){window.innerWidth,r(!1)},children:Object(h.jsx)(D.b,{to:"/profile-blogs",className:"nav-links",onClick:f,children:"Profile"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(D.b,{to:"/browse",className:"nav-links",onClick:f,children:"Browse"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(D.b,{to:"/",className:"nav-links",onClick:p,children:"Log Out"})})]})),Object(h.jsx)(j,{children:Object(h.jsxs)("nav",{className:"navbar",children:[Object(h.jsx)("div",{className:"imgContainer",children:Object(h.jsx)("img",{className:"img1",src:G})}),Object(h.jsx)("div",{className:"menu-icon",onClick:function(){return s(!c)},children:Object(h.jsx)("div",{className:c?"fas fa-times":"fas fa-bars"})}),m]})})},K=(c(499),c(47)),z=(c(162),function(e){var t=Object(n.useState)([]),c=Object(k.a)(t,2),s=c[0],a=c[1];return Object(n.useEffect)((function(){var t=R.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(d.a)(Object(d.a)({},e.data()),{},{id:e.id}))})),a(t)}));return function(){return t()}}),[e]),{docs:s}});function V(e,t,c,s,a){var o=Object(n.useState)(null),r=Object(k.a)(o,2),l=r[0],i=r[1],u=F().currentUser,j=new Date,b=["January","February","March","April","May","June","July","August","September","October","November","December"][j.getMonth()],O=String(j.getDate()).padStart(2,"0");j.getFullYear();return Object(n.useEffect)(Object(w.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("id is: ".concat(t)+" from GetData page"),console.log("grabs data from GetData page"),[],e.next=5,f.get("users/".concat(u.uid,"/drafts/").concat(t,"/images.json")).then((function(e){console.log(e);var t=[];for(var c in e.data)console.log(c),t.unshift(Object(d.a)(Object(d.a)({},e.data[c]),{},{id:c}));i(t)})).catch((function(e){return console.log(e)}));case 5:case"end":return e.stop()}}),e)}))),[e,c,s,a]),{datas:l}}var Z=c(510);function X(e){var t=e.data,c=e.setSelectedImg,n=e.setSelectedId,s=e.setSelectedDescription,a=e.imageDraft;console.log(a);return Object(h.jsx)("div",{className:"img-grid",children:t&&t.map((function(e){return Object(h.jsx)(Z.a.div,{className:"img-wrap",layout:!0,whileHover:{opacity:1},onClick:function(){return t=e.imageUrl,a=e.id,o=e.description,c(t),n(a),s(o),void console.log(a);var t,a,o},children:Object(h.jsx)(Z.a.img,{src:e.imageUrl,alt:"uploaded pic",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2}})},e.id)}))})}function Q(e){var t=e.selectedImg,c=e.setSelectedImg,s=e.selectedId,a=e.setSelectedId,o=e.selectedDescription,r=e.setSelectedDescription,l=e.count,i=e.savedDescription,u=e.deletedImage,j=(e.deletedImageUrl,F().currentUser),d=Object(n.useRef)(),b=(Object(P.g)(),new Date),O=["January","February","March","April","May","June","July","August","September","October","November","December"][b.getMonth()],g=String(b.getDate()).padStart(2,"0");b.getFullYear();console.log(s);return Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("div",{className:"backdrop2",onClick:function(e){e.target.classList.contains("backdrop2")&&(c(null),a(null),r(null),i(null))},children:Object(h.jsxs)("div",{className:"content",children:[Object(h.jsx)("img",{src:t,alt:"enlarged pic"}),Object(h.jsxs)("div",{className:"modal-form",children:[Object(h.jsx)("label",{children:"Description"}),Object(h.jsx)("textarea",{ref:d,value:o,onChange:function(e){return r(e.target.value)}}),Object(h.jsx)("button",{onClick:function(e){var n={description:d.current.value,imageUrl:t};console.log(n),function(e){f.request({method:"put",url:"users/".concat(j.uid,"/drafts/").concat(l,"/images/").concat(s,".json"),data:e}).then((function(t){console.log(t),i(e.description)})).catch((function(e){return console.log(e)}))}(n),c(null),e.preventDefault(),console.log("saved description of ".concat(n.description))},children:"Save"}),Object(h.jsx)("button",{className:"delete",onClick:function(e){f.request({method:"delete",url:"users/".concat(j.uid,"/drafts/").concat(l,"/images/").concat(s,".json")}).then((function(e){console.log(e),console.log("".concat(s," image is deleted")),u("".concat(s," deleted"))})).catch((function(e){return console.log(e)})),c(null),e.preventDefault()},children:"Delete"})]})]})})})}function $(){var e=Object(n.useRef)(),t=Object(n.useRef)(),c=Object(n.useRef)(),s=F(),a=s.currentUser,o=(s.updateProfile,Object(n.useState)("")),r=Object(k.a)(o,2),l=r[0],i=r[1],u=Object(n.useState)(null),j=Object(k.a)(u,2),b=j[0],O=j[1],g=z(a.uid).docs,p=Object(P.g)(),m=Object(n.useState)([]),x=Object(k.a)(m,2),v=x[0],S=x[1],y=Object(n.useState)(""),C=Object(k.a)(y,2),D=(C[0],C[1]),E=Object(n.useState)(null),A=Object(k.a)(E,2),I=A[0],U=A[1],R=Object(n.useState)(null),_=Object(k.a)(R,2),B=_[0],T=_[1],M=Object(n.useState)(null),L=Object(k.a)(M,2),J=L[0],Y=L[1],G=Object(n.useState)(null),W=Object(k.a)(G,2),H=W[0],Z=W[1],$=Object(n.useState)(null),ee=Object(k.a)($,2),te=ee[0],ce=ee[1],ne=Object(n.useState)(!1),se=Object(k.a)(ne,2),ae=se[0],oe=se[1],re=V(g,v.id,H,te).datas;console.log(re),console.log(v.id);var le=function(){var e=Object(w.a)(N.a.mark((function e(t){var c,n,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=["image/png","image/jpeg"],n=t.target.files[0],s=0,v.length>1&&(s=v.length-1),console.log(s),n&&c.includes(n.type)?(O(n),D(v.id),i("")):(O(null),D(""),i("Please select an image file (png or jpeg)"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=re;console.log(ie);var ue=new Date,je=["January","February","March","April","May","June","July","August","September","October","November","December"][ue.getMonth()],de=String(ue.getDate()).padStart(2,"0"),be=ue.getFullYear(),Oe="".concat(je," ").concat(de,"/").concat(be),fe=Object(n.useState)(!1),he=Object(k.a)(fe,2),ge=(he[0],he[1],[]);!0===ae&&(ge=Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("div",{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&oe(!1)},children:Object(h.jsxs)("div",{className:"options",children:[Object(h.jsx)("h2",{children:"Save to Drafts?"}),Object(h.jsxs)("div",{className:"actions",children:[Object(h.jsx)("button",{onClick:function(){var e={title:t.current.value,content:c.current.value};me(v.id,e),console.log("saved to drafts"),p.push("/profile-blogs")},children:"Yes"}),Object(h.jsx)("button",{onClick:function(){console.log("not saved to drafts"),f.request({method:"delete",url:"users/".concat(a.uid,"/images/").concat(Oe,"/").concat(v.id,".json")}).then((function(e){console.log(e),console.log("".concat(v.id," image file is deleted"))})).catch((function(e){return console.log(e)})),f.request({method:"delete",url:"users/".concat(a.uid,"/count/").concat(v.id,".json")}).then((function(e){console.log(e),console.log("".concat(v.id," count file is deleted"))})).catch((function(e){return console.log(e)})),p.push("/profile-blogs")},children:"No"})]})]})})}));var pe=function(){var e=Object(w.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(v),e.next=3,f.get("users/".concat(a.uid,"/count.json")).then((function(e){console.log(e.data),console.log(e.data.length);var t=[];for(var c in e.data)t.push(Object(d.a)(Object(d.a)({},e.data[c]),{},{id:c}));console.log(t.length);var n=0;t.length>1&&(n=t.length-1),S(t[n])})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=function(e,t){f.post("users/".concat(a.uid,"/drafts/").concat(e,"/content.json"),t).then((function(e){console.log(e)})).catch((function(e){return console.log(e)})),f.request({method:"delete",url:"users/".concat(a.uid,"/count/").concat(v.id,".json")}).then((function(e){console.log(e),console.log("".concat(v.id," count file is deleted"))})).catch((function(e){return console.log(e)}))};Object(n.useEffect)(Object(w.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.scrollTo(0,0),console.log(v),pe();case 3:case"end":return e.stop()}}),e)}))),[]),console.log(v),console.log(I),console.log(B),console.log("this is savedDescription from Add Page ".concat(H)),console.log(ae);var xe="/".concat(a.uid,"/images/").concat(Oe,"/").concat(v.id,"/").concat(B,".json");return console.log(xe),Object(h.jsxs)("div",{className:"container-add",children:[Object(h.jsxs)("div",{className:"title",children:[Object(h.jsx)("h1",{children:"New Blog"}),Object(h.jsx)("button",{onClick:function(){oe(!0)},children:"Back"})]}),Object(h.jsxs)("form",{className:"newBlog",children:[Object(h.jsxs)("div",{className:"newBlog-input",children:[Object(h.jsx)("label",{children:"Title "}),Object(h.jsx)("input",{type:"text",ref:t})]}),Object(h.jsxs)("div",{className:"newBlog-input",children:[Object(h.jsx)("label",{children:"Images "}),Object(h.jsxs)("div",{className:"inputFile",children:[Object(h.jsx)("input",{type:"file",onChange:le,ref:e}),Object(h.jsx)("span",{children:Object(h.jsx)("i",{className:"fas fa-plus"})})]}),Object(h.jsx)("h4",{children:"Click on any image to edit and add a description"}),Object(h.jsxs)("div",{className:"output",children:[l&&Object(h.jsx)("div",{className:"errors",children:l}),b&&b.name,b&&Object(h.jsx)(q,{file:b,setFile:O,id:v.id,setId:D})]})]}),Object(h.jsx)(X,{data:re,setSelectedImg:U,setSelectedId:T,setSelectedDescription:Y}),Object(h.jsxs)("div",{className:"newBlog-input",children:[Object(h.jsx)("label",{children:"Content "}),Object(h.jsx)("textarea",{rows:"20",cols:"100",placeholder:"Start writing here...",ref:c})]}),Object(h.jsx)("div",{className:"newBlog-post",children:Object(h.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault();var n={date:Oe,title:t.current.value,content:c.current.value};f.post("users/".concat(a.uid,"/blogs/").concat(v.id,"/content.json"),n).then((function(e){console.log(e)})).catch((function(e){return console.log(e)}));var s,o=Object(K.a)(re);try{for(o.s();!(s=o.n()).done;){var r=s.value;console.log(r),f.post("users/".concat(a.uid,"/blogs/").concat(v.id,"/images.json"),r).then((function(e){console.log(e)})).catch((function(e){return console.log(e)}))}}catch(l){o.e(l)}finally{o.f()}f.request({method:"delete",url:"users/".concat(a.uid,"/drafts/").concat(v.id,".json")}).then((function(e){console.log(e),console.log("draft ".concat(v.id," deleted"))})).catch((function(e){return console.log(e)})),p.push("/profile-blogs")},children:"Post"})})]}),ge,I&&Object(h.jsx)(Q,{selectedImg:I,setSelectedImg:U,selectedId:B,setSelectedId:T,selectedDescription:J,setSelectedDescription:Y,count:v.id,savedDescription:Z,deletedImage:ce,deletedImageUrl:xe})]})}function ee(){var e=Object(n.useRef)(),t=Object(n.useRef)(),c=Object(n.useRef)(),s=F(),a=s.currentUser,o=(s.updateProfile,Object(n.useState)("")),r=Object(k.a)(o,2),l=r[0],i=r[1],u=Object(n.useState)(null),j=Object(k.a)(u,2),d=j[0],b=j[1],O=z(a.uid).docs,g=Object(P.g)(),p=Object(n.useState)([]),m=Object(k.a)(p,2),x=m[0],v=(m[1],Object(n.useState)("")),S=Object(k.a)(v,2),y=S[0],C=S[1],D=Object(n.useState)(null),E=Object(k.a)(D,2),A=E[0],I=E[1],U=Object(n.useState)(null),R=Object(k.a)(U,2),_=R[0],B=R[1],T=Object(n.useState)(null),M=Object(k.a)(T,2),L=M[0],J=M[1],Y=Object(n.useState)(null),G=Object(k.a)(Y,2),W=G[0],H=G[1],Z=Object(n.useState)(null),$=Object(k.a)(Z,2),ee=$[0],te=$[1],ce=Object(n.useState)(!1),ne=Object(k.a)(ce,2),se=ne[0],ae=ne[1],oe=Object(P.h)().id;console.log(oe);var re=Object(n.useState)([]),le=Object(k.a)(re,2),ie=le[0],ue=le[1],je=V(O,oe,W,ee).datas;console.log(je);var de=new Date,be=["January","February","March","April","May","June","July","August","September","October","November","December"][de.getMonth()],Oe=String(de.getDate()).padStart(2,"0"),fe=de.getFullYear(),he="".concat(be," ").concat(Oe,"/").concat(fe);console.log(x.id);var ge=function(){f.request({method:"delete",url:"users/".concat(a.uid,"/drafts/").concat(oe,".json")}).then((function(e){console.log(e),console.log("draft ".concat(oe," deleted"))})).catch((function(e){return console.log(e)})),f.request({method:"delete",url:"users/".concat(a.uid,"/count/").concat(x.id,".json")}).then((function(e){console.log(e),console.log("".concat(x.id," count file is deleted"))})).catch((function(e){return console.log(e)})),g.push("/profile-blogs")},pe=function(e){e.target.classList.contains("backdrop")&&ae(!1)},me=[];!0===se&&(me=Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("div",{className:"backdrop",onClick:pe,children:Object(h.jsxs)("div",{className:"options",children:[Object(h.jsx)("h2",{children:"Save to Drafts?"}),Object(h.jsxs)("div",{className:"actions",children:[Object(h.jsx)("button",{onClick:function(){var e="";(ye||t.current.value!==e)&&(ye!==t.current.value&&(e=t.current.value),ye===t.current.value&&(e=ye));var n=Ee;c.current.value!==n&&(n=c.current.value),je.length>0&&Fe&&Fe.push(x.id),je.length>0&&!Fe&&x.id,je.length;var s="",o="";console.log(s),console.log(o),ie.length>0&&(s=ie[0].content,o=Object.keys(s),Ce(s[o].title),Ae(s[o].content)),console.log(n);var r={title:e,content:n};f.put("users/".concat(a.uid,"/drafts/").concat(oe,"/content/").concat(o,".json"),r).then((function(e){console.log(e)})).catch((function(e){return console.log(e)})),f.request({method:"delete",url:"users/".concat(a.uid,"/count/").concat(x.id,".json")}).then((function(e){console.log(e),console.log("".concat(x.id," count file is deleted"))})).catch((function(e){return console.log(e)})),console.log("saved to drafts"),g.push("/profile-blogs")},children:"Yes"}),Object(h.jsx)("button",{onClick:ge,children:"No"})]})]})})}));var xe=Object(n.useState)(!1),ve=Object(k.a)(xe,2),Ne=ve[0],we=ve[1];!0===Ne&&(me=Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("div",{className:"backdrop",onClick:pe,children:Object(h.jsxs)("div",{className:"options",children:[Object(h.jsx)("h2",{children:"Delete Draft?"}),Object(h.jsxs)("div",{className:"actions",children:[Object(h.jsx)("button",{onClick:ge,children:"Yes"}),Object(h.jsx)("button",{onClick:function(){we(!1)},children:"No"})]})]})})}));var ke=Object(n.useState)(""),Se=Object(k.a)(ke,2),ye=Se[0],Ce=Se[1],Pe=Object(n.useState)(""),De=Object(k.a)(Pe,2),Ee=De[0],Ae=De[1],Ie=Object(n.useState)([]),Ue=Object(k.a)(Ie,2),Re=Ue[0],_e=Ue[1],Be=Object(n.useState)([]),Te=Object(k.a)(Be,2),Fe=Te[0];Te[1];console.log(Ee);var Me=function(){var e=Object(w.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("users/".concat(a.uid,"/drafts/").concat(oe,".json")).then((function(e){console.log(e);var t=[];t.push({content:e.data.content,images:e.data.images}),ue(t),_e(e.data.images);var c="",n="";t.length>0&&(c=t[0].content,n=Object.keys(c),Ce(c[n].title),Ae(c[n].content))})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();console.log(Re),console.log(ye);Object(n.useEffect)(function(){var e=Object(w.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.scrollTo(0,0),Me();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[ee]),console.log(ye);console.log(je);return Object(h.jsxs)("div",{className:"container-add",children:[Object(h.jsxs)("div",{className:"title",children:[Object(h.jsxs)("h1",{children:["Edit Draft #",oe]}),Object(h.jsxs)("div",{className:"choices",children:[Object(h.jsx)("button",{onClick:function(){ae(!0)},children:"Back"}),Object(h.jsx)("button",{className:"delete",onClick:function(){we(!0)},children:"Delete"})]})]}),Object(h.jsxs)("form",{className:"newBlog",children:[Object(h.jsxs)("div",{className:"newBlog-input",children:[Object(h.jsx)("label",{children:"Title "}),Object(h.jsx)("input",{type:"text",ref:t,value:ye,onChange:function(e){return Ce(e.target.value)}})]}),Object(h.jsxs)("div",{className:"newBlog-input",children:[Object(h.jsx)("label",{children:"Images "}),Object(h.jsxs)("div",{className:"inputFile",children:[Object(h.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0],c=0;x.length>1&&(c=x.length-1),console.log(c),t&&["image/png","image/jpeg"].includes(t.type)?(b(t),C(oe),i("")):(b(null),C(""),i("Please select an image file (png or jpeg)"))},ref:e}),Object(h.jsx)("span",{children:Object(h.jsx)("i",{className:"fas fa-plus"})})]}),Object(h.jsx)("h4",{children:"Click on any image to edit and add a description"}),Object(h.jsxs)("div",{className:"output",children:[l&&Object(h.jsx)("div",{className:"errors",children:l}),d&&d.name,d&&Object(h.jsx)(q,{file:d,setFile:b,id:y,setId:C})]})]}),Object(h.jsx)(X,{data:je,setSelectedImg:I,setSelectedId:B,setSelectedDescription:J,imageDraft:Re}),A&&Object(h.jsx)(Q,{selectedImg:A,setSelectedImg:I,selectedId:_,setSelectedId:B,selectedDescription:L,setSelectedDescription:J,count:oe,savedDescription:H,deletedImage:te,deletedImageUrl:""}),Object(h.jsxs)("div",{className:"newBlog-input",children:[Object(h.jsx)("label",{children:"Content "}),Object(h.jsx)("textarea",{rows:"20",cols:"100",value:Ee,ref:c,onChange:function(e){return Ae(e.target.value)}})]}),Object(h.jsx)("div",{className:"newBlog-post",children:Object(h.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault();var n={date:he,title:t.current.value,content:c.current.value};f.post("users/".concat(a.uid,"/blogs/").concat(oe,"/content.json"),n).then((function(e){console.log(e)})).catch((function(e){return console.log(e)}));var s,o=Object(K.a)(je);try{for(o.s();!(s=o.n()).done;){var r=s.value;console.log(r),f.post("users/".concat(a.uid,"/blogs/").concat(oe,"/images.json"),r).then((function(e){console.log(e)})).catch((function(e){return console.log(e)}))}}catch(l){o.e(l)}finally{o.f()}f.request({method:"delete",url:"users/".concat(a.uid,"/drafts/").concat(oe,".json")}).then((function(e){console.log(e),console.log("draft ".concat(oe," deleted"))})).catch((function(e){return console.log(e)})),g.push("/profile-blogs")},children:"Post"})})]}),me]})}c(163);function te(){var e=Object(P.h)().id;console.log(e);var t=F().currentUser,c=Object(P.g)(),s=Object(n.useState)([]),a=Object(k.a)(s,2),o=a[0],r=a[1],l=Object(n.useState)([]),i=Object(k.a)(l,2),u=i[0],j=i[1],d=Object(n.useState)(""),b=Object(k.a)(d,2),O=b[0],g=b[1];console.log(u),Object(n.useEffect)(Object(w.a)(N.a.mark((function c(){return N.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return window.scrollTo(0,0),c.next=3,f.get("users/".concat(t.uid,"/blogs/").concat(e,".json")).then((function(e){console.log(e.data);var t=[],c=[];t.push({content:e.data.content}),e.data.images&&(c.push({images:e.data.images}),j(c)),r(t)})).catch((function(e){return console.log(e)}));case 3:return c.next=5,f.get("users/".concat(t.uid,"/profile.json")).then((function(e){console.log(e.data);var t=Object.values(e.data);console.log(t),g(t[0].name)})).catch((function(e){return console.log(e)}));case 5:case"end":return c.stop()}}),c)}))),[]);var p="",m="",x="";if(o.length>0){var v=o[0].content,S=Object.keys(v);p=v[S].title,m=v[S].content,x=v[S].date}var y=Object(h.jsx)("div",{}),C=Object(h.jsx)("div",{}),D=[],E="";if(u.length>0){E=Object.values(u[0].images),console.log(E),console.log(E.length);for(var A=0;A<E.length;A++)console.log(E[A].id),D.push({id:E[A].id,imageUrl:E[A].imageUrl,description:E[A].description});console.log(D),y=D.map((function(e){return e.description?Object(h.jsxs)("div",{className:"img",children:[Object(h.jsx)("img",{src:e.imageUrl}),Object(h.jsx)("p",{children:e.description})]}):e.description?void 0:Object(h.jsx)("div",{className:"noDesc",children:Object(h.jsx)("img",{src:e.imageUrl})})})),C=Object(h.jsxs)("div",{className:"gallery",children:[Object(h.jsx)("h4",{children:"Gallery"}),Object(h.jsx)("div",{className:"img-grid",children:y})]})}return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsxs)("div",{className:"showBlog",children:[Object(h.jsxs)("header",{children:[Object(h.jsx)("h2",{children:p}),Object(h.jsxs)("h4",{children:["Author: ",O," "]}),Object(h.jsxs)("h4",{children:["Posted: ",x]})]}),C,Object(h.jsx)("div",{className:"synopsis",children:Object(h.jsx)("p",{children:m})})]}),Object(h.jsx)("div",{className:"backButton",children:Object(h.jsx)("button",{onClick:function(){return c.goBack()},children:"Back"})})]})}c(500);function ce(e){return Object(h.jsx)("div",{className:"error",children:Object(h.jsx)("h4",{children:e.message})})}function ne(){Object(n.useRef)();var e=Object(n.useRef)(),t=Object(n.useRef)(),c=Object(n.useRef)(),s=F(),a=s.register,o=(s.currentUser,Object(n.useState)("")),r=Object(k.a)(o,2),l=r[0],i=r[1],u=Object(n.useState)(!1),j=Object(k.a)(u,2),d=j[0],b=j[1],O=Object(P.g)();function f(){return(f=Object(w.a)(N.a.mark((function n(s){return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s.preventDefault(),console.log(e.current.value),console.log(t.current.value),t.current.value===c.current.value){n.next=5;break}return n.abrupt("return",i("Passwords do not match"));case 5:return n.prev=5,i(""),b(!0),n.next=10,a(e.current.value,t.current.value);case 10:console.log("Account created..."),O.push("/profile-blogs"),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(5),i("Failed to create an account, ".concat(n.t0));case 17:b(!1);case 18:case"end":return n.stop()}}),n,null,[[5,14]])})))).apply(this,arguments)}return Object(h.jsxs)("div",{className:"general",children:[Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)("div",{className:"signUp",children:[Object(h.jsx)("figure",{children:Object(h.jsx)("img",{src:W,alt:"adventures with chu"})}),Object(h.jsx)("h1",{children:"Register"}),l&&Object(h.jsx)(ce,{message:l}),Object(h.jsxs)("form",{onSubmit:function(e){return f.apply(this,arguments)},children:[Object(h.jsxs)("div",{className:"input-form",children:[Object(h.jsx)("label",{children:"Email Address"}),Object(h.jsx)("input",{type:"email",required:!0,ref:e})]}),Object(h.jsxs)("div",{className:"input-form",children:[Object(h.jsx)("label",{children:"Password"}),Object(h.jsx)("input",{type:"password",required:!0,ref:t,minLength:"6",autoComplete:"off"})]}),Object(h.jsxs)("div",{className:"input-form",children:[Object(h.jsx)("label",{children:"Confirm Password"}),Object(h.jsx)("input",{type:"password",required:!0,ref:c,minLength:"6",autoComplete:"off"})]}),Object(h.jsx)("button",{disabled:d,type:"submit",className:"button",children:"Sign Up"})]}),Object(h.jsx)("div",{className:"login",children:Object(h.jsxs)("p",{children:["Have an account? ",Object(h.jsx)("span",{children:Object(h.jsx)("a",{href:"/sign-in",children:"Log in"})})]})})]})}),Object(h.jsx)(C,{})]})}c(501);function se(){var e=Object(n.useRef)(),t=Object(n.useRef)(),c=F().login,s=Object(n.useState)(""),a=Object(k.a)(s,2),o=a[0],r=a[1],l=Object(n.useState)(!1),i=Object(k.a)(l,2),u=i[0],j=i[1],d=Object(P.g)();function b(){return(b=Object(w.a)(N.a.mark((function n(s){return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s.preventDefault(),n.prev=1,r(""),j(!0),n.next=6,c(e.current.value,t.current.value);case 6:d.push("/profile-blogs"),console.log("Account logged in..."),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),r("Failed to sign in, ".concat(n.t0));case 13:j(!1);case 14:case"end":return n.stop()}}),n,null,[[1,10]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(h.jsxs)("div",{className:"general",children:[Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)("div",{className:"signUp",children:[Object(h.jsx)("figure",{children:Object(h.jsx)("img",{src:W,alt:"adventures with chu"})}),Object(h.jsx)("h1",{children:"Login"}),o&&Object(h.jsx)(ce,{message:o}),Object(h.jsxs)("form",{onSubmit:function(e){return b.apply(this,arguments)},children:[Object(h.jsxs)("div",{className:"input-form",children:[Object(h.jsx)("label",{children:"Email Address"}),Object(h.jsx)("input",{type:"email",required:!0,ref:e})]}),Object(h.jsxs)("div",{className:"input-form",children:[Object(h.jsx)("label",{children:"Password"}),Object(h.jsx)("input",{type:"password",required:!0,ref:t,minLength:"6",autoComplete:"off"})]}),Object(h.jsx)("button",{disabled:u,type:"submit",className:"button",children:"Log In"})]}),Object(h.jsx)("div",{className:"login",children:Object(h.jsxs)("p",{children:["Don't have an account? ",Object(h.jsx)("span",{children:Object(h.jsx)("a",{href:"/sign-up",children:"Sign Up"})})]})}),Object(h.jsx)("div",{className:"login",children:Object(h.jsxs)("p",{children:["Forgot password? ",Object(h.jsx)("span",{children:Object(h.jsx)("a",{href:"/forgot-password",children:"Reset Password"})})]})})]})}),Object(h.jsx)(C,{})]})}c(502);var ae=c.p+"static/media/img2.cca8c7c5.jpg";c.p;function oe(){var e=Object(n.useState)(""),t=Object(k.a)(e,2),c=(t[0],t[1]),s=F(),a=s.currentUser,o=s.logout,r=Object(P.g)().history,l=Object(n.useState)([]),i=Object(k.a)(l,2),u=i[0],j=i[1],b=Object(n.useState)(""),O=Object(k.a)(b,2),g=O[0],p=O[1],m=Object(n.useState)(!1),x=Object(k.a)(m,2);x[0],x[1];function v(){return(v=Object(w.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(""),e.prev=1,e.next=4,o();case 4:window.location.reload(),r.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),c("Failed to log out");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}var S=Object(h.jsx)("h1",{children:"(Profile Name)"}),y=Object(h.jsx)("h2",{children:"(Location)"});g.length>0&&(g[0].name&&(S=Object(h.jsx)("h1",{children:g[0].name})),g[0].location&&(y=Object(h.jsx)("h2",{children:g[0].location}))),console.log(g);Object(n.useEffect)(Object(w.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("users/".concat(a.uid,"/blogs.json")).then((function(e){console.log(e.data);var t=[];for(var c in e.data)t.push(Object(d.a)(Object(d.a)({},e.data[c]),{},{id:c}));console.log(t),j(t)})).catch((function(e){return console.log(e)}));case 2:return e.next=4,f.get("users/".concat(a.uid,"/profile.json")).then((function(e){console.log(e.data);var t=[];for(var c in e.data)t.unshift(Object(d.a)(Object(d.a)({},e.data[c]),{},{id:c}));p(t)})).catch((function(e){return console.log(e)}));case 4:console.log(g),console.log(g[0]);case 6:case"end":return e.stop()}}),e)}))),[]);var C=ae,E=0,A=0;if(g&&g.length>0){if(g[0].images)C=Object.values(g[0].images)[0].imageUrl;if(g[0].following)E=Object.keys(g[0].following).length;if(g[0].followers)A=Object.keys(g[0].followers).length}console.log(C),console.log(E);var I="";return u&&(I=u.length),Object(h.jsxs)("div",{className:"containers",children:[Object(h.jsxs)("div",{className:"profile-page",children:[Object(h.jsx)("div",{className:"profilePic",children:Object(h.jsx)("picture",{className:"profile-pic",children:Object(h.jsx)("img",{src:C})})}),Object(h.jsxs)("div",{className:"user-details",children:[Object(h.jsxs)("div",{className:"display",children:[S,y]}),Object(h.jsxs)("div",{className:"count",children:[Object(h.jsx)(D.b,{to:"/profile-blogs",children:Object(h.jsxs)("p",{children:["Posts: ",I]})}),Object(h.jsx)(D.b,{to:"/profile-followers",children:Object(h.jsxs)("p",{className:"followers",children:["Followers: ",A]})}),Object(h.jsx)(D.b,{to:"/profile-following",children:Object(h.jsxs)("p",{className:"following",children:["Following: ",E]})})]})]}),Object(h.jsxs)("div",{className:"links",children:[Object(h.jsx)("button",{children:Object(h.jsx)(D.b,{to:"/edit-profile",children:"Edit Profile"})}),Object(h.jsx)("button",{children:Object(h.jsx)(D.b,{to:"/",onClick:function(){return v.apply(this,arguments)},children:"Log out"})})]})]}),Object(h.jsx)("div",{className:"underline2",children:Object(h.jsx)("div",{className:"shadow2"})})]})}c(503);function re(){var e=Object(n.useState)(!1),t=Object(k.a)(e,2),c=t[0],s=t[1],a=F().currentUser,o=Object(n.useState)([]),r=Object(k.a)(o,2),l=r[0],i=r[1],u=Object(n.useState)([]),b=Object(k.a)(u,2),O=(b[0],b[1],Object(n.useState)([])),g=Object(k.a)(O,2),p=g[0],m=g[1];console.log(c);console.log(l);var x=function(){var e=Object(n.useState)([]),t=Object(k.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(1),o=Object(k.a)(a,2),r=o[0],l=(o[1],F().currentUser);return Object(n.useEffect)((function(){var e={count:"".concat(r)};f.post("users/".concat(l.uid,"/count.json"),e).then((function(e){console.log(e),console.log(e.data);var t=[];for(var c in e.data)t.push(Object(d.a)(Object(d.a)({},e.data),{},{count:r,name:e.data.name}));s(t)})).catch((function(e){return console.log(e)}))}),[]),{info:c}}().info,v=function(){};console.log(l.length);var S,y="",C=[],P=(l.map((function(e){C.unshift(e.id)})),l.includes("title"),Object(n.useState)([])),E=Object(k.a)(P,2),A=E[0],I=E[1];console.log(A),S=l.map((function(e){var t=e.content,c="";e.content&&(c=Object.keys(t)),console.log(c);var n="/profile-blogs/".concat(e.id,"/edit");if(e.content)if(""==t[c].title){var s=C.indexOf(e.id)+1;y=Object(h.jsxs)(D.b,{to:n,children:["Draft #",s]})}else y=Object(h.jsx)(D.b,{to:n,children:t[c].title});return Object(h.jsx)("ul",{children:Object(h.jsx)("li",{children:y},e.id)})})),console.log(A);var U=A.map((function(e){var t=e.content,c="";e.content&&(c=Object.keys(t)),console.log(t[c].title);var n="",s="",a="";if(console.log(e.images),e.images)for(var o=0;o<1;o++)n=e.images,console.log(n),s=Object.keys(n),console.log(s),console.log(s[o]),console.log(n[s[o]].imageUrl),a=n[s[o]].imageUrl;console.log(s);var r="",l="/profile/blogs/".concat(e.id);return e.images||(r=Object(h.jsx)(D.b,{to:l,children:Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("h2",{children:t[c].title}),Object(h.jsx)("div",{className:"info",children:Object(h.jsx)("p",{children:t[c].date})}),Object(h.jsx)("p",{children:t[c].content})]})})),e.images&&(r=Object(h.jsx)(D.b,{to:l,children:Object(h.jsxs)("div",{className:"cardWithImg",children:[Object(h.jsx)("h2",{children:t[c].title}),Object(h.jsx)("p",{children:t[c].date}),Object(h.jsxs)("div",{className:"details",children:[Object(h.jsx)("div",{className:"img",children:Object(h.jsx)("img",{src:a})}),Object(h.jsx)("div",{className:"info",children:Object(h.jsx)("p",{children:t[c].content})})]})]})})),Object(h.jsx)("div",{className:"perBlog",children:r})}));console.log(A.length),console.log(l.length);var R=[];R=0===l.length&&0===A.length?Object(h.jsx)("div",{style:{display:"flex",flexDirection:"column",alignContent:"center",textAlign:"center",width:"100%",maxWidth:"300px",margin:"40px auto",padding:"10px",border:"1px solid #111",boxShadow:"2px 2px 2px #1115"},children:Object(h.jsxs)(D.b,{to:"profile-blogs-new",children:[Object(h.jsx)("p",{onClick:v,style:{fontSize:"1.5rem"},children:"Create your first blog!"}),Object(h.jsx)("i",{className:"fas fa-plus",style:{marginBottom:"20px",fontSize:"1.2rem"}})]})}):Object(h.jsxs)(j,{children:[Object(h.jsxs)("div",{className:"mainTabs",children:[Object(h.jsx)("div",{className:"newPost",children:Object(h.jsx)("button",{onClick:v,children:Object(h.jsx)(D.b,{to:"profile-blogs-new",children:Object(h.jsx)("i",{className:"fas fa-plus"})})})}),Object(h.jsx)("div",{className:"posts",children:Object(h.jsxs)("div",{children:[Object(h.jsxs)("h3",{onClick:function(){s(1!=c),console.log(c)},children:["Drafts (",l.length,")"]}),c&&S]})})]}),Object(h.jsx)("div",{className:"showBlogs",children:Object(h.jsxs)("div",{children:[Object(h.jsxs)("h3",{children:["Blogs (",A.length,")"]}),Object(h.jsx)("div",{className:"blog-grid",children:U})]})})]}),console.log(p);var _=Object(n.useState)([]),B=Object(k.a)(_,2),T=B[0],M=B[1];console.log(T);var L=[];if(T.length>0){var q,J=Object(K.a)(T);try{for(J.s();!(q=J.n()).done;){var Y=q.value;L.push(Y.id)}}catch(H){J.e(H)}finally{J.f()}console.log(L),console.log(L.length);var G=L.length-1;console.log(G);for(var W=0;W<G;W++)f.request({method:"delete",url:"users/".concat(a.uid,"/count/").concat(L[W],".json")}).then((function(e){console.log(e)})).catch((function(e){return console.log(e)}))}return Object(n.useEffect)(function(){var e=Object(w.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.scrollTo(0,0),e.next=3,f.get("users/".concat(a.uid,"/drafts.json")).then((function(e){console.log(e.data);var t=[];for(var c in e.data)t.unshift(Object(d.a)(Object(d.a)({},e.data[c]),{},{id:c}));i(t)})).catch((function(e){return console.log(e)}));case 3:return e.next=5,f.get("users/".concat(a.uid,"/profile.json")).then((function(e){console.log(e.data);var t=[];for(var c in e.data)t.unshift(Object(d.a)(Object(d.a)({},e.data[c]),{},{id:c}));m(t)})).catch((function(e){return console.log(e)}));case 5:return e.next=7,f.get("users/".concat(a.uid,"/count.json")).then((function(e){console.log(e.data);var t=[];for(var c in e.data)t.push({id:c});console.log(t),M(t)})).catch((function(e){return console.log(e)}));case 7:return e.next=9,f.get("users/".concat(a.uid,"/blogs.json")).then((function(e){console.log(e.data);var t=[];for(var c in e.data)t.unshift(Object(d.a)(Object(d.a)({},e.data[c]),{},{id:c}));console.log(t),I(t)})).catch((function(e){return console.log(e)}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[x]),console.log(p),Object(h.jsxs)("div",{className:"profile",children:[Object(h.jsx)(oe,{}),Object(h.jsx)("main",{children:Object(h.jsx)("div",{className:"userContent",children:Object(h.jsxs)("div",{className:"tags",children:[Object(h.jsx)("p",{children:Object(h.jsxs)(D.b,{to:"profile-blogs",children:[Object(h.jsx)("i",{className:"fas fa-scroll"}),"Blogs"]})}),Object(h.jsx)("p",{children:Object(h.jsxs)(D.b,{to:"profile-gallery",children:[Object(h.jsx)("i",{className:"far fa-image"}),"Gallery"]})})]})})}),Object(h.jsx)("div",{className:"containers",children:R})]})}var le=function(e){Object(i.a)(c,e);var t=Object(u.a)(c);function c(){return Object(r.a)(this,c),t.apply(this,arguments)}return Object(l.a)(c,[{key:"render",value:function(){return Object(h.jsxs)("div",{className:"home",children:[Object(h.jsx)(re,{}),Object(h.jsx)(C,{})]})}}]),c}(n.Component),ie=c(167);function ue(e){var t=e.component,c=Object(ie.a)(e,["component"]),n=F().currentUser;return Object(h.jsx)(P.b,Object(d.a)(Object(d.a)({},c),{},{render:function(e){return n?Object(h.jsx)(t,Object(d.a)({},e)):Object(h.jsx)(P.a,{to:"/sign-in"})}}))}function je(){var e=Object(n.useRef)(),t=(Object(n.useRef)(),F().resetPassword),c=Object(n.useState)(""),s=Object(k.a)(c,2),a=s[0],o=s[1],r=Object(n.useState)(!1),l=Object(k.a)(r,2),i=l[0],u=l[1],j=Object(n.useState)(""),d=Object(k.a)(j,2),b=d[0],O=d[1];function f(){return(f=Object(w.a)(N.a.mark((function c(n){return N.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n.preventDefault(),c.prev=1,O(""),o(""),u(!0),c.next=7,t(e.current.value);case 7:O("Check your inbox/junk for further instructions"),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(1),o("Failed to reset password, ".concat(c.t0));case 13:u(!1);case 14:case"end":return c.stop()}}),c,null,[[1,10]])})))).apply(this,arguments)}return Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)("div",{className:"signUp",children:[Object(h.jsx)("figure",{children:Object(h.jsx)("img",{src:W,alt:"adventures with chu"})}),a&&Object(h.jsx)(ce,{message:a}),b&&Object(h.jsx)(ce,{message:b}),Object(h.jsxs)("form",{onSubmit:function(e){return f.apply(this,arguments)},children:[Object(h.jsxs)("div",{className:"input-form",children:[Object(h.jsx)("label",{children:"Email Address"}),Object(h.jsx)("input",{type:"email",required:!0,ref:e})]}),Object(h.jsx)("button",{disabled:i,type:"submit",className:"button",children:"Reset Password"})]}),Object(h.jsx)("div",{className:"login",children:Object(h.jsxs)("p",{children:["Have an account?",Object(h.jsx)("a",{href:"/sign-in",children:"Login"})]})})]})})}var de=function(e,t,c,s){var a=Object(n.useState)(0),o=Object(k.a)(a,2),r=o[0],l=o[1],i=Object(n.useState)(null),u=Object(k.a)(i,2),j=u[0],d=u[1],b=Object(n.useState)(null),O=Object(k.a)(b,2),h=O[0],g=O[1],p=F().currentUser,m=Object(n.useState)(""),x=Object(k.a)(m,2),v=(x[0],x[1],p.uid);return Object(n.useEffect)(Object(w.a)(N.a.mark((function c(){var n,a,o;return N.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:console.log(t+" from useStorage.js"),n=U.ref(e.name),a=R.collection(v),o=function(){var e=Object(w.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.next=3,f.get("users/".concat(p.uid,"/profile.json")).then((function(e){console.log(e.data);var c=Object.keys(e.data);console.log(c[0]),t=c[0]})).catch((function(e){return console.log(e)}));case 3:return e.next=5,t;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;l(t)}),(function(e){d(e)}),Object(w.a)(N.a.mark((function e(){var c,r,l;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getDownloadURL();case 2:return c=e.sent,r=_(),a.add({url:c,createdAt:r}),g(c),l={imageUrl:c,description:""},e.next=9,f.delete("users/".concat(p.uid,"/profile/").concat(t,"/images/").concat(s,".json")).then((function(e){console.log(e)})).catch((function(e){return console.log(e)}));case 9:if(!t){e.next=12;break}return e.next=12,f.post("users/".concat(p.uid,"/profile/").concat(t,"/images.json"),l).then((function(e){console.log(e),console.log("img uploaded to firebase DB")})).catch((function(e){return console.log(e)}));case 12:t||o().then(function(){var e=Object(w.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.post("users/".concat(p.uid,"/profile/").concat(t,"/images.json"),l).then((function(e){console.log(e),console.log("img uploaded to firebase DB")})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 13:case"end":return e.stop()}}),e)}))));case 5:case"end":return c.stop()}}),c)}))),[e]),{progress:r,url:h,error:j}};function be(e){var t=e.file,c=e.setFile,s=e.id,a=e.setId,o=Object(n.useState)(!1),r=Object(k.a)(o,2),l=r[0],i=r[1],u=Object(n.useState)(""),j=Object(k.a)(u,2),d=j[0],b=j[1],O=de(t,s,l,d),g=O.url,p=O.progress;console.log(s+" from progressBar.js"),console.log(p,g);var m=F().currentUser;return Object(n.useEffect)(Object(w.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g&&c(null),e.next=3,f.get("users/".concat(m.uid,"/profile.json")).then((function(e){if(console.log(e.data),e.data){var t=Object.keys(e.data);console.log(t),b(t[0]),console.log("there is data"),i(!0)}})).catch((function(e){return console.log(e)}));case 3:console.log(d);case 4:case"end":return e.stop()}}),e)}))),[g,c,a,t]),Object(h.jsx)("div",{className:"progress-bar",style:{width:p+"%"}})}function Oe(){var e=Object(n.useRef)(),t=Object(n.useRef)(),c=Object(n.useRef)(),s=Object(n.useRef)(),a=Object(n.useRef)(),o=Object(n.useRef)(),r=F(),l=r.currentUser,i=r.updateProfile,u=Object(n.useState)(""),j=Object(k.a)(u,2),b=j[0],O=j[1],g=Object(n.useState)(!1),p=Object(k.a)(g,2),m=p[0],x=p[1],v=Object(n.useState)(null),S=Object(k.a)(v,2),y=S[0],C=S[1],D=Object(P.g)(),E=Object(n.useState)([]),A=Object(k.a)(E,2),I=(A[0],A[1],Object(n.useState)("")),U=Object(k.a)(I,2),R=U[0],_=U[1],B=z(l.uid).docs;function T(){return(T=Object(w.a)(N.a.mark((function c(n){var r,u,j,d,b;return N.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(n.preventDefault(),console.log(e.current.value),a.current.value===o.current.value){c.next=4;break}return c.abrupt("return",O("Passwords do not match"));case 4:if(r=K,u=Q,j=re,t.current.value!==u&&(u=t.current.value),e.current.value!==r&&(r=e.current.value),re||(j=""),d={images:j,location:u,name:r,following:"",followers:""},b=R,s.current.value!==R&&(b=s.current.value),!ne){c.next=21;break}return O(""),x(!0),c.next=18,f.put("users/".concat(l.uid,"/profile/").concat(ne,".json"),d).then((function(e){console.log(e.data)})).catch((function(e){return console.log(e)}));case 18:return c.next=20,i(b,a.current.value);case 20:D.push("/profile-blogs");case 21:if(ne){c.next=35;break}return c.prev=22,O(""),x(!0),c.next=27,i(b,a.current.value);case 27:return c.next=29,f.post("users/".concat(l.uid,"/profile.json"),d).then((function(e){console.log(e.data)})).catch((function(e){return console.log(e)}));case 29:D.push("/profile-blogs"),c.next=35;break;case 32:c.prev=32,c.t0=c.catch(22),O("Failed to update account, ".concat(c.t0));case 35:x(!1);case 36:case"end":return c.stop()}}),c,null,[[22,32]])})))).apply(this,arguments)}var M=function(){var e=Object(w.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={images:"",location:"",name:"",following:"",followers:""},e.next=3,f.post("users/".concat(l.uid,"/profile.json"),t).then((function(e){console.log(e.data)})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();console.log(l.uid);var L=Object(n.useState)(!1),q=Object(k.a)(L,2),J=q[0],Y=q[1],G=Object(n.useState)(""),H=Object(k.a)(G,2),K=H[0],V=H[1],Z=Object(n.useState)(""),X=Object(k.a)(Z,2),Q=X[0],$=X[1],ee=Object(n.useState)(""),te=Object(k.a)(ee,2),ne=te[0],se=te[1],ae=Object(n.useState)([]),oe=Object(k.a)(ae,2),re=oe[0],le=oe[1],ie=Object(n.useState)(null),ue=Object(k.a)(ie,2),je=ue[0],de=ue[1],Oe=function(e,t,c){var s=Object(n.useState)(null),a=Object(k.a)(s,2),o=a[0],r=a[1],l=Object(n.useState)(null),i=Object(k.a)(l,2),u=i[0],j=(i[1],F().currentUser),b=new Date,O=(b.getMonth(),String(b.getDate()).padStart(2,"0"),b.getFullYear(),function(){var e=Object(w.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.next=3,f.get("users/".concat(j.uid,"/profile.json")).then((function(e){console.log(e.data);var c=Object.keys(e.data);console.log(c[0]),t=c[0]})).catch((function(e){return console.log(e)}));case 3:return e.next=5,t;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return Object(n.useEffect)(Object(w.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("id is: ".concat(t)+" from GetData page"),console.log("grabs data from GetData page"),!t){e.next=5;break}return e.next=5,f.get("users/".concat(j.uid,"/profile/").concat(t,"/images.json")).then((function(e){console.log(e);var t=[];for(var c in e.data)console.log(c),t.unshift(Object(d.a)(Object(d.a)({},e.data[c]),{},{id:c}));r(t)})).catch((function(e){return console.log(e)}));case 5:t||O().then(function(){var e=Object(w.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("users/".concat(j.uid,"/profile/").concat(t,"/images.json")).then((function(e){console.log(e);var t=[];for(var c in e.data)console.log(c),t.unshift(Object(d.a)(Object(d.a)({},e.data[c]),{},{id:c}));r(t)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e)}))),[e,c]),{datas:o,changed:u}}(B,ne,je).datas;console.log(Oe),console.log(J),Object(n.useEffect)(Object(w.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("users/".concat(l.uid,"/profile.json")).then((function(e){console.log(e.data);var t="",c="";e.data||console.log("There is no data"),e.data&&(t=Object.values(e.data),c=Object.keys(e.data),console.log(t),console.log(c),Y(!0)),K||t&&V(t[0].name),Q||t&&$(t[0].location),se(c[0]),le(t[0].images),_(l.email)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),[Oe]);var fe=function(){var e=Object(w.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,f.delete("users/".concat(l.uid,"/profile/").concat(ne,"/images/").concat(Oe[0].id,".json")).then((function(e){console.log(e.data),de("changed")})).catch((function(e){return console.log(e)}));case 3:c.current.value=null;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();console.log(Oe);var he="";if(Oe||(he=Object(h.jsx)("div",{})),null!==Oe&&Oe.length>0){var ge=Object.values(Oe[0]);console.log(ge),he=Object(h.jsxs)("div",{className:"img",children:[Object(h.jsx)("img",{src:ge[1]},Oe[0].id),Object(h.jsx)("button",{onClick:fe,children:"Delete"})]})}return console.log(re),console.log(K),console.log(ne),Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)("div",{className:"signUp",children:[Object(h.jsx)("figure",{children:Object(h.jsx)("img",{src:W,alt:"adventures with chu"})}),Object(h.jsx)("h1",{children:"Edit Profile"}),b&&Object(h.jsx)(ce,{message:b}),Object(h.jsxs)("form",{children:[Object(h.jsxs)("div",{className:"input-form",children:[Object(h.jsx)("label",{children:"Profile Name:"}),Object(h.jsx)("input",{type:"text",ref:e,value:K,onChange:function(e){return V(e.target.value)}})]}),Object(h.jsxs)("div",{className:"input-form",children:[Object(h.jsx)("label",{children:"Location:"}),Object(h.jsx)("input",{type:"text",ref:t,value:Q,onChange:function(e){return $(e.target.value)}})]}),Object(h.jsxs)("div",{className:"input-form",children:[Object(h.jsx)("label",{children:"Profile Picture:"}),Object(h.jsx)("input",{type:"file",accept:"image/png, image/jpeg",onChange:function(e){0==J&&M();var t=e.target.files[0];t&&["image/png","image/jpeg"].includes(t.type)?(C(t),O("")):(C(null),O("Please select an image file (png or jpeg)"))},ref:c}),y&&Object(h.jsx)("div",{children:y.name}),y&&Object(h.jsx)(be,{file:y,setFile:C,id:ne})]}),he,Object(h.jsxs)("div",{className:"input-form",children:[Object(h.jsx)("label",{children:"Email Address"}),Object(h.jsx)("input",{type:"email",ref:s,value:R,onChange:function(e){return _(e.target.value)}})]}),Object(h.jsxs)("div",{className:"input-form",children:[Object(h.jsx)("label",{children:"Password"}),Object(h.jsx)("input",{type:"password",ref:a,minLength:"6",autoComplete:"off",placeholder:"Leave blank to keep original"})]}),Object(h.jsxs)("div",{className:"input-form",children:[Object(h.jsx)("label",{children:"Confirm New Password"}),Object(h.jsx)("input",{type:"password",ref:o,minLength:"6",autoComplete:"off",placeholder:"Leave blank to keep original"})]}),Object(h.jsx)("button",{disabled:m,type:"submit",className:"button",onClick:function(e){return T.apply(this,arguments)},children:"Update"})]}),Object(h.jsx)("div",{className:"login",children:Object(h.jsx)("p",{children:Object(h.jsx)("span",{children:Object(h.jsx)("a",{href:"/profile-blogs",children:"Cancel"})})})})]})})}c(504);function fe(){var e=Object(n.useState)([]),t=Object(k.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)([]),o=Object(k.a)(a,2),r=o[0],l=o[1],i=Object(n.useState)([]),u=Object(k.a)(i,2),j=u[0],d=u[1],b=Object(n.useRef)(),g=F().currentUser,p=function(){var e=Object(w.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("https://gnews.io/api/v4/search?q=".concat(t,"&max=10&lang=en&token=").concat("bd6b156dd22b9e68637a63384d91680e")).then((function(e){console.log(e.data);var t,c=[],n=Object(K.a)(e.data.articles);try{for(n.s();!(t=n.n()).done;){var a=t.value;c.push({content:a.content,description:a.description,image:a.image,date:a.publishedAt,source:a.source,title:a.title,url:a.url})}}catch(o){n.e(o)}finally{n.f()}s(c)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();console.log(r);var m=function(e){var t=r.filter((function(t){return t.name.indexOf(e)>-1}));console.log(t),d(t)};console.log(j);var x=Object(n.useState)(""),v=Object(k.a)(x,2),S=v[0],y=v[1],P=Object(n.useState)([]),D=Object(k.a)(P,2),E=D[0],A=D[1],I=Object(n.useState)(""),U=Object(k.a)(I,2),R=U[0],_=U[1];console.log(S),console.log(E);var B=function(){var e=Object(w.a)(N.a.mark((function e(t){var c,n,s,a,o,r,l,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(null),c="",e.next=4,f.get("https://auth-production-90d68-default-rtdb.firebaseio.com/users/".concat(t.id,"/profile.json")).then((function(e){c=Object.keys(e.data)})).catch((function(e){return console.log(e)}));case 4:if(console.log(c),n={id:t.id},console.log(t),console.log(n),s={id:g.uid},a=[],E){for(o=Object.keys(E),r=0;r<o.length;r++)console.log(E[o[r]]),console.log(E[o[r]].id),a.push({id:E[o[r]].id});console.log(a)}if(l={id:t.id},console.log(l.id),i=a.some((function(e){return e.id==t.id})),console.log(i),1==i&&console.log("already following"),0!=i&&E){e.next=22;break}return console.log("not following"),e.next=20,f.post("https://auth-production-90d68-default-rtdb.firebaseio.com/users/".concat(g.uid,"/profile/").concat(S,"/following.json"),n).then((function(e){console.log(e),_("changed")})).catch((function(e){return console.log(e)}));case 20:return e.next=22,f.post("https://auth-production-90d68-default-rtdb.firebaseio.com/users/".concat(t.id,"/profile/").concat(c[0],"/followers.json"),s).then((function(e){console.log(e),_("changed")})).catch((function(e){return console.log(e)}));case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T="",M="";j&&(T=j.map((function(e){var t="";if(e.images&&(t=Object.values(e.images)[0].imageUrl),e.images||(t=J),g.uid===e.id&&(M=Object(h.jsxs)("div",{className:"user",children:[Object(h.jsx)("div",{className:"image",children:Object(h.jsx)("img",{src:t})}),Object(h.jsx)("h2",{children:e.name}),Object(h.jsx)("p",{children:e.location})]})),g.uid!==e.id&&(M=Object(h.jsxs)("div",{className:"user",children:[Object(h.jsx)("div",{className:"image",children:Object(h.jsx)("img",{src:t})}),Object(h.jsx)("h2",{children:e.name}),Object(h.jsx)("p",{children:e.location}),Object(h.jsx)("button",{onClick:function(){return B(e)},children:"Follow"})]})),E){for(var c=Object.keys(E),n=[],s=0;s<c.length;s++)console.log(E[c[s]]),console.log(E[c[s]].id),n.push({id:E[c[s]].id});console.log(n);var a=n.some((function(t){return t.id==e.id}));console.log(a),1==a&&(console.log("already following"),M=Object(h.jsxs)("div",{className:"user",children:[Object(h.jsx)("div",{className:"image",children:Object(h.jsx)("img",{src:t})}),Object(h.jsx)("h2",{children:e.name}),Object(h.jsx)("p",{children:e.location}),Object(h.jsx)("button",{className:"following",children:"Following"})]}))}return Object(h.jsx)("div",{className:"userProfile",children:M})}))),Object(n.useEffect)(Object(w.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("https://auth-production-90d68-default-rtdb.firebaseio.com/users.json").then((function(e){console.log(e.data);var t=[];console.log(Object.keys(e.data));var c=Object.keys(e.data);console.log(c.length);for(var n=0;n<c.length;n++){console.log(e.data[c[n]].profile);Object.keys(e.data[c[n]].profile);console.log(c);var s=Object.values(e.data[c[n]].profile);console.log(s),t.push({id:c[n],name:s[0].name,location:s[0].location,images:s[0].images})}console.log(t),l(t)})).catch((function(e){return console.log(e)}));case 2:return e.next=4,f.get("users/".concat(g.uid,"/profile.json")).then((function(e){console.log(e.data);var t=Object.values(e.data),c=Object.keys(e.data);console.log(t),console.log(c),A(t[0].following),y(c[0])})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)}))),[R]);var L="",q=c.map((function(e){return c.length>0&&e.content.length>200&&(L=Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:e.title}),Object(h.jsx)("img",{src:e.image}),Object(h.jsxs)("p",{children:[" ",e.content.slice(0,199),"...",Object(h.jsx)("span",{children:Object(h.jsx)("a",{href:e.url,target:"__blank",children:" Read More."})})]})]})),Object(h.jsx)("div",{className:"blog",children:L})}));return Object(h.jsxs)("div",{className:"home",children:[Object(h.jsxs)("div",{className:"browse",children:[Object(h.jsx)("div",{className:"search",children:Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(b.current.value),p(b.current.value),r&&m(b.current.value),b.current.value=null},className:"browseForm",children:[Object(h.jsxs)("div",{className:"browseInput",children:[Object(h.jsx)("label",{children:"Browse"}),Object(h.jsx)("input",{type:"text",ref:b})]}),Object(h.jsx)("button",{type:"submit",children:"Search"})]})}),Object(h.jsxs)("div",{className:"grids",children:[T,q]})]}),Object(h.jsx)(C,{})]})}function he(){return Object(h.jsx)("div",{className:"",children:Object(h.jsx)(fe,{})})}c(505);function ge(e){var t=e.selectedImg,c=e.setSelectedImg;return Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("div",{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&c(null)},children:Object(h.jsx)("img",{src:t,alt:"enlarged pic"})})})}function pe(){var e=F().currentUser,t=Object(n.useState)([]),c=Object(k.a)(t,2),s=c[0],a=c[1],o=Object(n.useState)(null),r=Object(k.a)(o,2),l=r[0],i=r[1];Object(n.useEffect)(Object(w.a)(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.get("users/".concat(e.uid,"/blogs.json")).then((function(e){console.log(e.data);var t=[];for(var c in e.data)t.push(Object(d.a)(Object(d.a)({},e.data[c]),{},{id:c}));a(t)})).catch((function(e){return console.log(e)}));case 2:case"end":return t.stop()}}),t)}))),[]);var u=[];(console.log(s),s)&&(Object.keys(s).length>0&&s.map((function(e){if(e.images){console.log(e.images);var t=Object.values(e.images);console.log(t),t.map((function(e){u.push({id:e.id,url:e.imageUrl})})),console.log(u)}})));console.log(l);return Object(h.jsxs)("div",{className:"home",children:[Object(h.jsxs)("div",{className:"profile",children:[Object(h.jsx)(oe,{}),Object(h.jsx)("main",{children:Object(h.jsx)("div",{className:"userContent",children:Object(h.jsxs)("div",{className:"tags",children:[Object(h.jsx)("p",{children:Object(h.jsxs)(D.b,{to:"profile-blogs",children:[Object(h.jsx)("i",{className:"fas fa-scroll"}),"Blogs"]})}),Object(h.jsx)("p",{children:Object(h.jsxs)(D.b,{to:"profile-gallery",children:[Object(h.jsx)("i",{className:"far fa-image"}),"Gallery"]})})]})})}),Object(h.jsx)("div",{className:"profile-content",children:Object(h.jsxs)("div",{className:"img-grid",children:[u.map((function(e){return Object(h.jsx)(Z.a.div,{className:"img-wrap",whileHover:{opacity:1},onClick:function(){return i(e.url)},children:Object(h.jsx)(Z.a.img,{src:e.url,alt:"uploaded pic",initial:{opacity:0},animate:{opacity:1},transition:{delay:.1}})},e.id)})),l&&Object(h.jsx)(ge,{selectedImg:l,setSelectedImg:i})]})})]}),Object(h.jsx)(C,{})]})}function me(){var e=F().currentUser,t=Object(n.useState)([]),c=Object(k.a)(t,2),s=c[0],a=c[1],o=Object(n.useState)([]),r=Object(k.a)(o,2),l=(r[0],r[1],Object(n.useState)("")),i=Object(k.a)(l,2),u=i[0],j=i[1],b=Object(n.useState)(null),O=Object(k.a)(b,2),g=(O[0],O[1],Object(n.useState)([])),p=Object(k.a)(g,2),m=p[0],x=p[1],v=Object(n.useState)(!1),S=Object(k.a)(v,2),y=S[0],P=S[1],D=function(){var e=Object(w.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=4;break}if(!(Object.keys(s).length>0)){e.next=4;break}return e.delegateYield(N.a.mark((function e(){var t,c,n,a,o,r,l;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.keys(s[0].profile),c=Object.values(s[0].profile),console.log(c),n=Object.keys(c[0].following),a=Object.values(c[0].following),o=[],r=N.a.mark((function e(c){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("/users/".concat(a[c].id,".json")).then((function(e){console.log(e),o.push(Object(d.a)(Object(d.a)({},e.data),{},{userId:a[c].id,userObjectId:n[c],profileObjectValue:t[0]}))})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})),l=0;case 8:if(!(l<a.length)){e.next=13;break}return e.delegateYield(r(l),"t0",10);case 10:l++,e.next=8;break;case 13:o.length>0&&x(o);case 14:case"end":return e.stop()}}),e)}))(),"t0",4);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var t=Object(w.a)(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.get("/users/".concat(e.uid,".json")).then((function(e){console.log(e);var t=[];t.push(Object(d.a)({},e.data)),a(t),j("logged in"),P(!1)})).catch((function(e){return console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)(Object(w.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.scrollTo(0,0),E(),s&&D();case 3:case"end":return e.stop()}}),e)}))),[u,y]),console.log(m),console.log(s);var A=Object(h.jsx)("div",{});return m&&m.length>0&&(A=m.map((function(t){console.log(e.uid),console.log(t),console.log(t.id);var c=Object.keys(t.profile);console.log(c[0]);var n=Object.values(t.profile);console.log(n[0]),console.log(n[0].following);var s=Object(h.jsx)("img",{src:J});if(n[0].images){var a=Object.values(n[0].images);return s=Object(h.jsx)("img",{src:a[0].imageUrl}),Object(h.jsx)("div",{className:"followingUsers",children:Object(h.jsxs)("div",{className:"following",children:[Object(h.jsx)("div",{className:"profilePic",children:s}),Object(h.jsx)("div",{className:"profileName",children:Object(h.jsx)("h2",{children:n[0].name})})]})})}if(!n[0].images)return Object(h.jsx)("div",{className:"followingUsers",children:Object(h.jsxs)("div",{className:"following",children:[Object(h.jsx)("div",{className:"profilePic",children:s}),Object(h.jsx)("div",{className:"profileName",children:Object(h.jsx)("h2",{children:n[0].name})})]})})}))),Object(h.jsxs)("div",{className:"home",children:[Object(h.jsxs)("div",{className:"profile",children:[Object(h.jsx)(oe,{}),Object(h.jsxs)("div",{className:"followers",children:[Object(h.jsx)("h1",{children:"Following"}),A]})]}),Object(h.jsx)(C,{})]})}function xe(){var e=F().currentUser,t=Object(n.useState)([]),c=Object(k.a)(t,2),s=c[0],a=c[1],o=Object(n.useState)([]),r=Object(k.a)(o,2),l=(r[0],r[1],Object(n.useState)("")),i=Object(k.a)(l,2),u=i[0],j=i[1],b=Object(n.useState)(null),O=Object(k.a)(b,2),g=(O[0],O[1],Object(n.useState)([])),p=Object(k.a)(g,2),m=p[0],x=p[1],v=Object(n.useState)(!1),S=Object(k.a)(v,2),y=S[0],P=S[1],D=function(){var e=Object(w.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=4;break}if(!(Object.keys(s).length>0)){e.next=4;break}return e.delegateYield(N.a.mark((function e(){var t,c,n,a,o,r,l;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.keys(s[0].profile),c=Object.values(s[0].profile),console.log(c),n=Object.keys(c[0].followers),a=Object.values(c[0].followers),o=[],r=N.a.mark((function e(c){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("/users/".concat(a[c].id,".json")).then((function(e){console.log(e),o.push(Object(d.a)(Object(d.a)({},e.data),{},{userId:a[c].id,userObjectId:n[c],profileObjectValue:t[0]}))})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})),l=0;case 8:if(!(l<a.length)){e.next=13;break}return e.delegateYield(r(l),"t0",10);case 10:l++,e.next=8;break;case 13:o.length>0&&x(o);case 14:case"end":return e.stop()}}),e)}))(),"t0",4);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var t=Object(w.a)(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.get("/users/".concat(e.uid,".json")).then((function(e){console.log(e);var t=[];t.push(Object(d.a)({},e.data)),a(t),j("logged in"),P(!1)})).catch((function(e){return console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)(Object(w.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.scrollTo(0,0),E(),s&&D();case 3:case"end":return e.stop()}}),e)}))),[u,y]),console.log(m),console.log(s);var A=Object(h.jsx)("div",{});return m&&m.length>0&&(A=m.map((function(t){console.log(e.uid),console.log(t),console.log(t.id);var c=Object.keys(t.profile);console.log(c[0]);var n=Object.values(t.profile);console.log(n[0]),console.log(n[0].following);var s=Object(h.jsx)("img",{src:J});if(n[0].images){var a=Object.values(n[0].images);return s=Object(h.jsx)("img",{src:a[0].imageUrl}),Object(h.jsx)("div",{className:"followingUsers",children:Object(h.jsxs)("div",{className:"following",children:[Object(h.jsx)("div",{className:"profilePic",children:s}),Object(h.jsx)("div",{className:"profileName",children:Object(h.jsx)("h2",{children:n[0].name})})]})})}if(!n[0].images)return Object(h.jsx)("div",{className:"followingUsers",children:Object(h.jsxs)("div",{className:"following",children:[Object(h.jsx)("div",{className:"profilePic",children:s}),Object(h.jsx)("div",{className:"profileName",children:Object(h.jsx)("h2",{children:n[0].name})})]})})}))),Object(h.jsxs)("div",{className:"home",children:[Object(h.jsxs)("div",{className:"profile",children:[Object(h.jsx)(oe,{}),Object(h.jsxs)("div",{className:"followers",children:[Object(h.jsx)("h1",{children:"Followers"}),A]})]}),Object(h.jsx)(C,{})]})}function ve(){return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)(oe,{}),Object(h.jsx)("div",{className:"containers",children:Object(h.jsx)("p",{children:"I am a saved post"})})]})}function Ne(){var e=Object(P.h)(),t=e.id,c=e.user;console.log(c),console.log(t);var s=Object(P.g)(),a=Object(n.useState)([]),o=Object(k.a)(a,2),r=o[0],l=o[1],i=Object(n.useState)([]),u=Object(k.a)(i,2),j=u[0],d=u[1],b=Object(n.useState)(""),O=Object(k.a)(b,2),g=O[0],p=O[1];console.log(j),Object(n.useEffect)(Object(w.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.scrollTo(0,0),e.next=3,f.get("users/".concat(c,"/blogs/").concat(t,".json")).then((function(e){console.log(e.data);var t=[],c=[];t.push({content:e.data.content}),e.data.images&&(c.push({images:e.data.images}),d(c)),l(t)})).catch((function(e){return console.log(e)}));case 3:return e.next=5,f.get("users/".concat(c,"/profile.json")).then((function(e){console.log(e.data);var t=Object.values(e.data);console.log(t),p(t[0].name)})).catch((function(e){return console.log(e)}));case 5:case"end":return e.stop()}}),e)}))),[]);var m="",x="",v="";if(r.length>0){var S=r[0].content,y=Object.keys(S);m=S[y].title,x=S[y].content,v=S[y].date}var C=Object(h.jsx)("div",{}),D=Object(h.jsx)("div",{}),E=[],A="";if(j.length>0){A=Object.values(j[0].images),console.log(A),console.log(A.length);for(var I=0;I<A.length;I++)console.log(A[I].id),E.push({id:A[I].id,imageUrl:A[I].imageUrl,description:A[I].description});console.log(E),C=E.map((function(e){return e.description?Object(h.jsxs)("div",{className:"img",children:[Object(h.jsx)("img",{src:e.imageUrl}),Object(h.jsx)("p",{children:e.description})]}):e.description?void 0:Object(h.jsx)("div",{className:"noDesc",children:Object(h.jsx)("img",{src:e.imageUrl})})})),D=Object(h.jsxs)("div",{className:"gallery",children:[Object(h.jsx)("h4",{children:"Gallery"}),Object(h.jsx)("div",{className:"img-grid",children:C})]})}return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsxs)("div",{className:"showBlog",children:[Object(h.jsxs)("header",{children:[Object(h.jsx)("h2",{children:m}),Object(h.jsxs)("h4",{children:["Author: ",g," "]}),Object(h.jsxs)("h4",{children:["Posted: ",v]})]}),D,Object(h.jsx)("div",{className:"synopsis",children:Object(h.jsx)("p",{children:x})})]}),Object(h.jsx)("div",{className:"backButton",children:Object(h.jsx)("button",{onClick:function(){return s.goBack()},children:"Back"})})]})}var we=function(){return Object(h.jsx)(D.a,{children:Object(h.jsxs)(M,{children:[Object(h.jsx)(H,{}),Object(h.jsxs)(P.d,{children:[Object(h.jsx)(P.b,{path:"/",exact:!0,component:Y}),Object(h.jsx)(ue,{path:"/browse",component:he}),Object(h.jsx)(P.b,{path:"/sign-in",exact:!0,component:se}),Object(h.jsx)(P.b,{path:"/sign-up",exact:!0,component:ne}),Object(h.jsx)(P.b,{path:"/forgot-password",component:je}),Object(h.jsx)(P.b,{path:"/edit-profile",component:Oe}),Object(h.jsx)(ue,{path:"/profile-blogs",exact:!0,component:le}),Object(h.jsx)(ue,{path:"/profile-gallery",exact:!0,component:pe}),Object(h.jsx)(ue,{path:"/profile-following",exact:!0,component:me}),Object(h.jsx)(ue,{path:"/profile-followers",exact:!0,component:xe}),Object(h.jsx)(ue,{path:"/profile-saved",exact:!0,component:ve}),Object(h.jsx)(ue,{path:"/profile-blogs-new",exact:!0,component:$}),Object(h.jsx)(ue,{path:"/profile-blogs/:id/edit",exact:!0,component:ee}),Object(h.jsx)(ue,{path:"/profile/blogs/:id",component:te}),Object(h.jsx)(P.b,{path:"/:user/blogs/:id/",exact:!0,component:Ne}),Object(h.jsx)(P.b,{path:"/my-blogs/:id/",exact:!0,component:te}),Object(h.jsx)(P.b,{path:"/profile/my-blogs",component:x})]})]})})},ke=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,511)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,o=t.getTTFB;c(e),n(e),s(e),a(e),o(e)}))};o.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(we,{})}),document.getElementById("root")),ke()}},[[506,1,2]]]);
//# sourceMappingURL=main.23083a33.chunk.js.map